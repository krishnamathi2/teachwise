(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(700)}])},700:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return R}});var t=a(7568),r=a(7582),n=a(5893),i=a(7294),c=a(9008),o=a.n(c),l=a(6042),d=a(9396),u=a(9534),m=a(5332),f=a(4958);function p(e){var s,c,o,l,d=e.lessonContent,u=e.onClose,m=(0,i.useState)([]),f=m[0],p=m[1],b=(0,i.useState)(0),h=b[0],x=b[1],g=(0,i.useState)(!1),j=g[0],w=g[1],v=(0,i.useState)(""),y=v[0],k=v[1],N=(0,i.useState)(!1),S=N[0],C=N[1],z=(0,i.useState)(""),P=z[0],I=z[1],E=function(){var e=(0,t.Z)((function(){var e,s;return(0,r.__generator)(this,(function(a){switch(a.label){case 0:w(!0),k(""),a.label=1;case 1:return a.trys.push([1,4,5,6]),[4,fetch("/api/generate-slides",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lessonContent:d})})];case 2:return[4,a.sent().json()];case 3:return(e=a.sent()).error?k(e.error+(e.detail?": "+e.detail:"")):p(e.slides||[]),[3,6];case 4:return s=a.sent(),k("Failed to generate slides: "+s.message),[3,6];case 5:return w(!1),[7];case 6:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),_=function(){var e=(0,t.Z)((function(){var e,s,t,n,i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:if(!f.length)return[2];C(!0),I("PDF"),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,Promise.all([a.e(655),a.e(847),a.e(650)]).then(a.bind(a,1819))];case 2:return e=r.sent().default,s=new e("landscape","mm","a4"),t=s.internal.pageSize.getWidth(),n=s.internal.pageSize.getHeight(),f.forEach((function(e,a){var r;a>0&&s.addPage(),s.setFontSize(24),s.setFont(void 0,"bold"),s.text(e.title,t/2,30,{align:"center"}),s.setFontSize(14),s.setFont(void 0,"normal");var i=50;(null===(r=e.content)||void 0===r||r.forEach((function(e){var a=e.replace(/^[\u2022\xb7-]\s*/,"\u2022 ");s.splitTextToSize(a,t-40).forEach((function(e){i>n-30&&(s.addPage(),i=30),s.text(e,20,i),i+=8})),i+=3})),e.speakerNotes)&&(s.setFontSize(10),s.setFont(void 0,"italic"),i=n-25,s.splitTextToSize("Notes: ".concat(e.speakerNotes),t-40).forEach((function(e){s.text(e,20,i),i+=5})))})),s.save("lesson-slides.pdf"),[3,5];case 3:return i=r.sent(),console.error("PDF export error:",i),alert("Failed to export PDF. Please try again."),[3,5];case 4:return C(!1),I(""),[7];case 5:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),T=function(){var e=(0,t.Z)((function(){var e,s,t,n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:if(!f.length)return[2];C(!0),I("PPTX"),r.label=1;case 1:return r.trys.push([1,4,5,6]),[4,Promise.all([a.e(491),a.e(733)]).then(a.bind(a,7930))];case 2:return s=r.sent().default,(t=new s).author="TeachWise.ai",t.company="TeachWise",t.revision="1",t.subject="Educational Lesson Slides",t.title=(null===(e=f[0])||void 0===e?void 0:e.title)||"Lesson Presentation",f.forEach((function(e){var s,a=t.addSlide();a.addText(e.title,{x:.5,y:.5,w:9,h:1,fontSize:28,bold:!0,color:"2F4F4F",align:"center"});var r=(null===(s=e.content)||void 0===s?void 0:s.map((function(e){return e.replace(/^[\u2022\xb7-]\s*/,"\u2022 ")})).join("\n"))||"";r&&a.addText(r,{x:1,y:2,w:8,h:4,fontSize:18,color:"333333",bullet:!0,lineSpacing:32}),e.speakerNotes&&a.addNotes(e.speakerNotes)})),[4,t.writeFile({fileName:"lesson-slides.pptx"})];case 3:return r.sent(),[3,6];case 4:return n=r.sent(),console.error("PPTX export error:",n),alert("Failed to export PowerPoint. Please try again."),[3,6];case 5:return C(!1),I(""),[7];case 6:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,n.jsx)("div",{className:"slide-generator-modal",children:(0,n.jsxs)("div",{className:"slide-generator-container",children:[(0,n.jsxs)("div",{className:"slide-generator-header",children:[(0,n.jsx)("h2",{children:"\ud83d\uddbc\ufe0f Slide Generator"}),(0,n.jsx)("button",{onClick:u,className:"close-button",children:"\u2715"})]}),!f.length&&!j&&(0,n.jsxs)("div",{className:"slide-generator-intro",children:[(0,n.jsx)("p",{children:"Convert your lesson plan into beautiful PowerPoint-style slides!"}),(0,n.jsx)("button",{onClick:E,className:"generate-slides-button",children:"\u2728 Generate Slides"})]}),j&&(0,n.jsxs)("div",{className:"slide-generator-loading",children:[(0,n.jsx)("div",{className:"loading-spinner"}),(0,n.jsx)("p",{children:"Creating your slides..."})]}),y&&(0,n.jsxs)("div",{className:"slide-generator-error",children:[(0,n.jsxs)("p",{children:["\u274c ",y]}),(0,n.jsx)("button",{onClick:E,className:"retry-button",children:"\ud83d\udd04 Try Again"})]}),f.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"slide-controls",children:[(0,n.jsx)("button",{onClick:function(){h>0&&x(h-1)},disabled:0===h,className:"nav-button",children:"\u2190 Previous"}),(0,n.jsxs)("span",{className:"slide-counter",children:["Slide ",h+1," of ",f.length]}),(0,n.jsx)("button",{onClick:function(){h<f.length-1&&x(h+1)},disabled:h===f.length-1,className:"nav-button",children:"Next \u2192"})]}),(0,n.jsx)("div",{className:"slide-preview",children:(0,n.jsxs)("div",{className:"slide-content",children:[(0,n.jsx)("h1",{className:"slide-title",children:null===(s=f[h])||void 0===s?void 0:s.title}),(0,n.jsx)("div",{className:"slide-bullets",children:null===(c=f[h])||void 0===c||null===(o=c.content)||void 0===o?void 0:o.map((function(e,s){return(0,n.jsx)("div",{className:"bullet-point",children:e},s)}))})]})}),(null===(l=f[h])||void 0===l?void 0:l.speakerNotes)&&(0,n.jsxs)("div",{className:"speaker-notes",children:[(0,n.jsx)("h4",{children:"\ud83d\udcdd Speaker Notes:"}),(0,n.jsx)("p",{children:f[h].speakerNotes})]}),(0,n.jsxs)("div",{className:"export-info",children:[(0,n.jsxs)("p",{children:["\ud83d\udca1 ",(0,n.jsx)("strong",{children:"Download Options:"})]}),(0,n.jsxs)("ul",{children:[(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"PDF:"})," Perfect for handouts and printing"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"PowerPoint:"})," Editable slides for classroom use"]})]})]}),(0,n.jsxs)("div",{className:"download-options",children:[(0,n.jsx)("button",{onClick:function(){if(f.length)try{var e=JSON.stringify({slides:f},null,2),s=new Blob([e],{type:"application/json;charset=utf-8"}),a=URL.createObjectURL(s),t=document.createElement("a");t.href=a,t.download="lesson-slides-".concat(Date.now(),".json"),document.body.appendChild(t),t.click(),t.remove(),URL.revokeObjectURL(a)}catch(r){console.error("Failed to download slides JSON",r)}},className:"download-button json",disabled:S,children:"\ud83d\udce5 Download JSON"}),(0,n.jsx)("button",{onClick:_,className:"download-button pdf",disabled:S,children:S&&"PDF"===P?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"loading-spinner-small"}),"Generating PDF..."]}):(0,n.jsx)(n.Fragment,{children:"\ud83d\udcc4 Download as PDF"})}),(0,n.jsx)("button",{onClick:T,className:"download-button pptx",disabled:S,children:S&&"PPTX"===P?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"loading-spinner-small"}),"Generating PPTX..."]}):(0,n.jsx)(n.Fragment,{children:"\ud83d\udcca Download as PPTX"})})]})]})]})})}var b=a(2830),h=function(){return(0,n.jsxs)("div",{className:"result-skeleton",children:[(0,n.jsx)("div",{className:"skeleton-chip"}),(0,n.jsx)("div",{className:"skeleton-line skeleton-line--wide"}),(0,n.jsx)("div",{className:"skeleton-line skeleton-line--wide"}),(0,n.jsx)("div",{className:"skeleton-line"}),(0,n.jsx)("div",{className:"skeleton-line"}),(0,n.jsx)("div",{className:"skeleton-line skeleton-line--short"})]})};function x(){var e=(0,i.useState)("lesson"),s=e[0],a=e[1],c=(0,i.useState)("7"),o=c[0],x=c[1],g=(0,i.useState)("Science"),j=g[0],w=g[1],v=(0,i.useState)("Photosynthesis"),y=v[0],k=v[1],N=(0,i.useState)("6"),S=N[0],C=N[1],z=(0,i.useState)("45"),P=z[0],I=z[1],E=(0,i.useState)(""),_=E[0],T=E[1],A=(0,i.useState)(!1),F=A[0],L=A[1],O=(0,i.useState)(!1),R=O[0],Z=O[1],B=(0,i.useState)(!1),D=B[0],U=B[1],J=(0,i.useState)(null),Y=(J[0],J[1]),G=(0,b.eI)("https://fnbmngpucvahupgyxzre.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZuYm1uZ3B1Y3ZhaHVwZ3l4enJlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA5NjY1MDQsImV4cCI6MjA3NjU0MjUwNH0.xOP4I9ysM3XkPQZvnD63iXf79sHhhrakaCBoR1-8T9E"),X=(0,i.useState)(!1),q=X[0],M=X[1];(0,i.useEffect)((function(){var e=function(){var e=(0,t.Z)((function(){var e,s;return(0,r.__generator)(this,(function(a){switch(a.label){case 0:return[4,G.auth.getUser()];case 1:return e=a.sent(),s=e.data.user,Y(s),[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[]);var W=(0,i.useRef)(null),H=function(){var e=(0,t.Z)((function(){var e,a,t,n,i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:L(!0),r.label=1;case 1:return r.trys.push([1,4,5,6]),e=localStorage.getItem("teachwise_user"),a=e?JSON.parse(e).email:null,[4,fetch("/api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:s,grade:o,subject:j,topic:y,minutes:P,hideAnswers:q,weeks:S,email:a})})];case 2:return[4,r.sent().json()];case 3:return(t=r.sent()).error?"No credits remaining"===t.error||"Failed to deduct credit"===t.error?T("\u274c No Credits Remaining\n\nYou need 4 credits for this operation but you have ".concat(t.credits||0," credits left.\n\n\ud83d\udca1 **Add Credits to Continue using AI tools!**")):T("\u274c "+(t.detail||t.error)):(c=t.result,n=c?"quiz"===s?c.replace(/Question (\d+):/g,"\n\nQuestion $1:").replace(/\*\*Answer:\*\*/g,"\n**Answer:**").replace(/\*\*Explanation:\*\*/g,"\n**Explanation:**").replace(/^\n+/,"").trim():"presentation"===s?c.replace(/SLIDE (\d+):/g,"\n\n**SLIDE $1:**").replace(/Speaker Notes?:/gi,"\n**Speaker Notes:**").replace(/^\n+/,"").trim():c.replace(/\ud83c\udfaf/g,"\n\n\ud83c\udfaf").replace(/\ud83d\udcda/g,"\n\n\ud83d\udcda").replace(/\ud83d\udd25/g,"\n\n\ud83d\udd25").replace(/\ud83d\udcd6/g,"\n\n\ud83d\udcd6").replace(/\u2705/g,"\n\n\u2705").replace(/\ud83c\udfe0/g,"\n\n\ud83c\udfe0").replace(/\ud83d\udca1/g,"\n\n\ud83d\udca1").replace(/^\n+/,"").trim():c,T(n),setTimeout((function(){if(W.current){W.current.classList.add("success-animation"),setTimeout((function(){var e;return null===(e=W.current)||void 0===e?void 0:e.classList.remove("success-animation")}),600);try{W.current.scrollIntoView({behavior:"smooth",block:"start"}),W.current.scrollTop=0}catch(e){}}}),120)),[3,6];case 4:return i=r.sent(),T("\ud83d\udeab Network error: "+i.message),[3,6];case 5:return L(!1),[7];case 6:return[2]}var c}))}));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=(0,t.Z)((function(e){return(0,r.__generator)(this,(function(s){switch(s.label){case 0:return e.preventDefault(),T(""),[4,H()];case 1:return s.sent(),[2]}}))}));return function(s){return e.apply(this,arguments)}}(),V=function(){var e=(0,t.Z)((function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,H()];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),K=function(){var e=(0,t.Z)((function(){var e;return(0,r.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,navigator.clipboard.writeText(_)];case 1:return s.sent(),Z(!0),setTimeout((function(){return Z(!1)}),3e3),[3,3];case 2:return e=s.sent(),console.error("Failed to copy:",e),[3,3];case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),$=(0,i.useState)(!1),ee=$[0],se=$[1],ae=function(){return se(!1)},te=(0,i.useRef)(null),re=(0,i.useRef)(null),ne=(0,i.useRef)(null);(0,i.useEffect)((function(){var e=function(e){if("Escape"===e.key)return e.preventDefault(),void ae();if("Tab"===e.key){var s=te.current.querySelectorAll('button, [href], input, textarea, select, [tabindex]:not([tabindex="-1"])');if(!s||0===s.length)return;var a=s[0],t=s[s.length-1];e.shiftKey?document.activeElement===a&&(e.preventDefault(),t.focus()):document.activeElement===t&&(e.preventDefault(),a.focus())}};if(ee)return ne.current=document.activeElement,setTimeout((function(){var e;return null===(e=re.current)||void 0===e?void 0:e.focus()}),0),document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e);try{var s;null===(s=ne.current)||void 0===s||s.focus()}catch(a){}}}),[ee]);var ie=_.startsWith("\u274c")||_.startsWith("\ud83d\udeab"),ce=_.trim().length>0,oe=("presentation"===s||"lesson"===s)&&ce&&!ie,le=function(e){return"K"===e?"Kindergarten":"Grade ".concat(e)}(o),de=[{label:"Grade",value:le},{label:"Subject",value:j}];"lesson"===s&&de.push({label:"Duration",value:"".concat(P," mins")});var ue=F?"Crafting your content...":ie?"Needs a quick fix":ce?"Ready to review":"Awaiting your brief",me=F?"status-chip status-chip--loading":ie?"status-chip status-chip--error":ce?"status-chip status-chip--success":"status-chip",fe={a:function(e){e.node;var s=(0,u.Z)(e,["node"]);return(0,n.jsx)("a",(0,d.Z)((0,l.Z)({},s),{target:"_blank",rel:"noopener noreferrer"}))}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"workspace",children:[(0,n.jsxs)("section",{className:"panel form-panel",children:[(0,n.jsxs)("header",{className:"panel-header",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{children:"Content Builder"}),(0,n.jsx)("p",{children:"Describe the session and review polished output instantly."})]}),(0,n.jsx)("span",{className:"panel-badge",children:"lesson"===s?"Lesson Plan":"quiz"===s?"Quiz":"course"===s?"Course Content":"Presentation"})]}),(0,n.jsxs)("form",{onSubmit:Q,className:"form-grid",children:[(0,n.jsxs)("div",{className:"form-field",children:[(0,n.jsx)("label",{children:"Content Type"}),(0,n.jsxs)("select",{value:s,onChange:function(e){return a(e.target.value)},className:"form-select",children:[(0,n.jsx)("option",{value:"lesson",children:"\ud83d\udcda Lesson Plan"}),(0,n.jsx)("option",{value:"quiz",children:"\ud83d\udcdd Quiz & Assessment"}),(0,n.jsx)("option",{value:"course",children:"\ud83e\udded Course Content"}),(0,n.jsx)("option",{value:"presentation",children:"\ud83c\udfaf Presentation Slides"})]})]}),(0,n.jsxs)("div",{className:"form-two-column",children:[(0,n.jsxs)("div",{className:"form-field",children:[(0,n.jsx)("label",{children:"Grade Level"}),(0,n.jsxs)("select",{value:o,onChange:function(e){return x(e.target.value)},children:[(0,n.jsx)("option",{value:"K",children:"Kindergarten"}),(0,n.jsx)("option",{value:"1",children:"Grade 1"}),(0,n.jsx)("option",{value:"2",children:"Grade 2"}),(0,n.jsx)("option",{value:"3",children:"Grade 3"}),(0,n.jsx)("option",{value:"4",children:"Grade 4"}),(0,n.jsx)("option",{value:"5",children:"Grade 5"}),(0,n.jsx)("option",{value:"6",children:"Grade 6"}),(0,n.jsx)("option",{value:"7",children:"Grade 7"}),(0,n.jsx)("option",{value:"8",children:"Grade 8"}),(0,n.jsx)("option",{value:"9",children:"Grade 9"}),(0,n.jsx)("option",{value:"10",children:"Grade 10"}),(0,n.jsx)("option",{value:"11",children:"Grade 11"}),(0,n.jsx)("option",{value:"12",children:"Grade 12"})]})]}),(0,n.jsxs)("div",{className:"form-field",children:[(0,n.jsx)("label",{children:"Subject"}),(0,n.jsxs)("select",{value:j,onChange:function(e){return w(e.target.value)},children:[(0,n.jsx)("option",{value:"Science",children:"\ud83d\udd2c Science"}),(0,n.jsx)("option",{value:"Mathematics",children:"\ud83e\uddee Mathematics"}),(0,n.jsx)("option",{value:"English",children:"\ud83d\udcd6 English"}),(0,n.jsx)("option",{value:"History",children:"\ud83c\udfdb\ufe0f History"}),(0,n.jsx)("option",{value:"Geography",children:"\ud83c\udf0d Geography"}),(0,n.jsx)("option",{value:"Art",children:"\ud83c\udfa8 Art"}),(0,n.jsx)("option",{value:"Music",children:"\ud83c\udfb5 Music"}),(0,n.jsx)("option",{value:"Physical Education",children:"\u26bd Physical Education"}),(0,n.jsx)("option",{value:"Computer Science",children:"\ud83d\udcbb Computer Science"}),(0,n.jsx)("option",{value:"Foreign Language",children:"\ud83c\udf10 Foreign Language"})]})]})]}),(0,n.jsxs)("div",{className:"form-field",children:[(0,n.jsx)("label",{children:"Topic"}),(0,n.jsx)("input",{type:"text",value:y,onChange:function(e){return k(e.target.value)},placeholder:"Enter the specific topic or concept...",required:!0})]}),"lesson"===s&&(0,n.jsxs)("div",{className:"form-field",children:[(0,n.jsx)("label",{children:"Duration (minutes)"}),(0,n.jsxs)("select",{value:P,onChange:function(e){return I(e.target.value)},children:[(0,n.jsx)("option",{value:"30",children:"30 minutes"}),(0,n.jsx)("option",{value:"45",children:"45 minutes"}),(0,n.jsx)("option",{value:"60",children:"60 minutes"}),(0,n.jsx)("option",{value:"90",children:"90 minutes"})]})]}),"course"===s&&(0,n.jsxs)("div",{className:"form-field",children:[(0,n.jsx)("label",{children:"Course length (weeks)"}),(0,n.jsx)("input",{type:"number",min:"1",max:"52",value:S,onChange:function(e){return C(e.target.value)}})]}),(0,n.jsx)("div",{className:"form-field",children:(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{type:"checkbox",checked:q,onChange:function(e){return M(e.target.checked)}})," ","Hide answers (for student version)"]})}),(0,n.jsxs)("button",{type:"submit",disabled:F||!y.trim(),className:"generate-button",children:[F&&(0,n.jsx)("div",{className:"loading-spinner"}),F?"Generating...":"\u2728 Generate"]})]}),(0,n.jsxs)("div",{className:"helper-card",children:[(0,n.jsx)("h4",{children:"Tips for sharper output"}),(0,n.jsxs)("ul",{children:[(0,n.jsx)("li",{children:"Reference prior knowledge or recent units to anchor learning."}),(0,n.jsx)("li",{children:'Add skill focus like "critical thinking" or "collaborative" tasks.'}),(0,n.jsx)("li",{children:"Specify assessment style to tailor quizzes (multiple choice, rubric, etc.)."})]})]})]}),(0,n.jsxs)("section",{className:"panel result-panel",children:[(0,n.jsxs)("div",{className:"result-panel-header",children:[(0,n.jsx)("span",{className:me,children:ue}),(0,n.jsx)("div",{className:"summary-chips",children:de.map((function(e){var s=e.label,a=e.value;return(0,n.jsxs)("span",{className:"summary-chip",children:[(0,n.jsx)("span",{children:s}),(0,n.jsx)("strong",{children:a})]},s)}))})]}),F&&(0,n.jsx)(h,{}),!F&&ce&&(0,n.jsxs)("div",{className:"result-container ".concat(ie?"result-container--error":"result-container--success"),ref:W,children:[(0,n.jsxs)("div",{className:"result-header",children:[(0,n.jsx)("h3",{children:ie?"\u26a0\ufe0f Something needs attention":"lesson"===s?"\ud83d\udcda Lesson plan ready to use":"quiz"===s?"\ud83d\udcdd Quiz outline ready":"course"===s?"\ud83e\udded Course content ready":"presentation"===s?"\ud83c\udfaf Presentation slides ready":"\ud83d\udcc4 Content ready"}),(0,n.jsxs)("div",{className:"result-actions",children:[!ie&&(0,n.jsx)("button",{onClick:K,className:"copy-button",title:"Copy to clipboard",children:"\ud83d\udccb Copy"}),!ie&&(0,n.jsx)("button",{onClick:function(){return se(!0)},className:"copy-button",title:"View full",children:"\ud83d\udd0d View full"}),!ie&&(0,n.jsx)("button",{onClick:function(){try{var e=new Blob([_],{type:"text/plain;charset=utf-8"}),a=URL.createObjectURL(e),t=document.createElement("a");t.href=a,t.download="teachwise_generated_".concat(s,"_").concat(Date.now(),".txt"),document.body.appendChild(t),t.click(),t.remove(),URL.revokeObjectURL(a)}catch(r){console.error("Download failed",r)}},className:"slide-button",title:"Download as .txt",children:"\u2b07 Download"}),ie&&(0,n.jsx)("button",{onClick:V,className:"slide-button",title:"Retry",children:"\ud83d\udd01 Retry"}),oe&&(0,n.jsx)("button",{onClick:function(){return U(!0)},className:"slide-button",title:"Convert to slides",children:"\ud83d\uddbc\ufe0f Export as PDF/PPT"})]})]}),(0,n.jsx)(m.UG,{remarkPlugins:[f.Z],className:"result-content ".concat(ie?"error":"success"),components:fe,skipHtml:!0,children:_})]}),!F&&!ce&&(0,n.jsxs)("div",{className:"result-empty",children:[(0,n.jsx)("h3",{children:"Preview will appear here"}),(0,n.jsx)("p",{children:"Fine-tune the inputs on the left and generate to see AI-curated plans instantly."}),(0,n.jsxs)("ul",{children:[(0,n.jsx)("li",{children:"Switch between lesson plans and quizzes at any time."}),(0,n.jsx)("li",{children:"Use the duration field to align pacing with your schedule."}),(0,n.jsx)("li",{children:"Export polished slides once a lesson plan is created."})]})]}),!F&&ce&&ie&&(0,n.jsx)("div",{className:"result-empty result-empty--overlay",children:(0,n.jsx)("p",{children:"Review the message above and adjust your prompt \u2014 then try again."})})]})]}),R&&(0,n.jsx)("div",{className:"toast",children:"\u2705 Copied to clipboard!"}),ee&&(0,n.jsx)("div",{className:"full-modal",role:"dialog","aria-modal":"true",children:(0,n.jsxs)("div",{className:"full-modal-content",ref:te,children:[(0,n.jsxs)("div",{className:"full-modal-header",children:[(0,n.jsx)("h4",{children:"Full generated content"}),(0,n.jsx)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:(0,n.jsx)("button",{ref:re,className:"modal-close",onClick:ae,"aria-label":"Close modal",children:"\u2716"})})]}),(0,n.jsx)("pre",{className:"full-modal-pre",children:_}),(0,n.jsxs)("div",{className:"full-modal-actions",children:[(0,n.jsx)("button",{onClick:K,className:"copy-button",children:"\ud83d\udccb Copy"}),(0,n.jsx)("button",{onClick:function(){var e=new Blob([_],{type:"text/plain;charset=utf-8"}),a=URL.createObjectURL(e),t=document.createElement("a");t.href=a,t.download="teachwise_generated_".concat(s,"_").concat(Date.now(),".txt"),document.body.appendChild(t),t.click(),t.remove(),URL.revokeObjectURL(a)},className:"slide-button",children:"\u2b07 Download .txt"}),(0,n.jsx)("button",{onClick:ae,className:"slide-button",children:"Close"})]})]})}),D&&(0,n.jsx)(p,{lessonContent:_,onClose:function(){return U(!1)}})]})}var g=a(4924),j=a(1163);var w=a(357),v=a.n(w),y=function(e){var s=e.onPurchaseClick,a=e.onLowCredits,c=(0,j.useRouter)(),o=(0,i.useState)({credits:0,tier:"trial",tierInfo:{},creditCosts:{},minutesLeft:0,isTrialUser:!1}),l=o[0],d=o[1],u=(0,i.useState)(!0),m=u[0],f=u[1],p=(0,i.useState)(null),h=p[0],x=p[1],g=((0,b.eI)("https://fnbmngpucvahupgyxzre.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZuYm1uZ3B1Y3ZhaHVwZ3l4enJlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA5NjY1MDQsImV4cCI6MjA3NjU0MjUwNH0.xOP4I9ysM3XkPQZvnD63iXf79sHhhrakaCBoR1-8T9E"),function(){var e=(0,t.Z)((function(){var e,s,t,n,i,c,o;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:if(r.trys.push([0,3,4,5]),f(!0),!(e=localStorage.getItem("teachwise_user")))throw new Error("User not authenticated");return s=JSON.parse(e),t=s.email,[4,fetch("/api/trial-status?email=".concat(encodeURIComponent(t)))];case 1:return[4,(n=r.sent()).json()];case 2:if(i=r.sent(),!n.ok)throw new Error(i.error||"Failed to fetch credits");return d({credits:i.credits||i.creditsLeft||0,tier:i.isSubscribed?"paid":"trial",tierInfo:{name:i.isSubscribed?"Paid User":"Trial User",creditsPerPeriod:i.isSubscribed?"Unlimited":100},creditCosts:{lesson_plan:4,quiz:4,presentation:4,course:4},minutesLeft:i.minutesLeft||0,isTrialUser:!i.isSubscribed}),(c=i.credits||i.creditsLeft||0)<=12&&a&&a(c),[3,5];case 3:return o=r.sent(),console.error("Error fetching credits:",o),x(o.message),[3,5];case 4:return f(!1),[7];case 5:return[2]}}))}));return function(){return e.apply(this,arguments)}}());(0,i.useEffect)((function(){g();var e=setInterval(g,3e4),s=function(){console.log("Payment success detected, refreshing credits..."),g()},a=function(){console.log("Credits updated event detected, refreshing..."),g()};return window.addEventListener("payment-success",s),window.addEventListener("credits-updated",a),function(){clearInterval(e),window.removeEventListener("payment-success",s),window.removeEventListener("credits-updated",a)}}),[]);var w;return m?(0,n.jsx)("div",{className:"credits-display loading",children:(0,n.jsxs)("div",{className:"credits-skeleton",children:[(0,n.jsx)("div",{className:"skeleton-text"}),(0,n.jsx)("div",{className:"skeleton-number"})]})}):h?(0,n.jsxs)("div",{className:"credits-display error",children:[(0,n.jsx)("span",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,n.jsx)("span",{className:"error-text",children:"Credits unavailable"})]}):(0,n.jsxs)("div",{className:"jsx-104857faccafd81c credits-display",children:[(0,n.jsxs)("div",{onClick:s,className:"jsx-104857faccafd81c credits-main",children:[(0,n.jsxs)("div",{className:"jsx-104857faccafd81c credits-info",children:[(0,n.jsxs)("div",{className:"jsx-104857faccafd81c credits-count",children:[(0,n.jsx)("span",{style:{color:(w=l.credits,w<=5?"#ef4444":w<=15?"#f59e0b":"#10b981")},className:"jsx-104857faccafd81c credits-number",children:l.credits}),(0,n.jsx)("span",{className:"jsx-104857faccafd81c credits-label",children:"credits"}),(0,n.jsx)("button",{onClick:function(e){e.stopPropagation(),c.push("/pricing")},title:"Add more credits",className:"jsx-104857faccafd81c add-credits-btn",children:"+ Add Credits"})]}),(0,n.jsxs)("div",{className:"jsx-104857faccafd81c tier-info",children:[(0,n.jsx)("span",{className:"jsx-104857faccafd81c tier-icon",children:function(e){switch(e){case"trial":default:return"\u23f1\ufe0f";case"basic":return"\u2b50";case"pro":return"\ud83d\udc8e";case"enterprise":return"\ud83d\udc51"}}(l.tier)}),(0,n.jsx)("span",{style:{color:function(e){switch(e){case"trial":default:return"#6b7280";case"basic":return"#3b82f6";case"pro":return"#8b5cf6";case"enterprise":return"#f59e0b"}}(l.tier)},className:"jsx-104857faccafd81c tier-name",children:l.tierInfo.name||"Trial"})]}),l.isTrialUser&&l.minutesLeft>0&&(0,n.jsxs)("div",{className:"jsx-104857faccafd81c time-remaining",children:[(0,n.jsx)("span",{className:"jsx-104857faccafd81c time-icon",children:"\u23f1\ufe0f"}),(0,n.jsxs)("span",{className:"jsx-104857faccafd81c time-text",children:[l.minutesLeft," min left"]})]})]}),l.credits<=10&&(0,n.jsxs)("div",{className:"jsx-104857faccafd81c low-credits-warning",children:[(0,n.jsx)("span",{className:"jsx-104857faccafd81c warning-icon",children:"\u26a1"}),(0,n.jsx)("span",{className:"jsx-104857faccafd81c warning-text",children:l.credits<=5?"Very low credits!":"Running low"})]})]}),(0,n.jsx)("div",{className:"jsx-104857faccafd81c credits-breakdown",children:(0,n.jsxs)("div",{className:"jsx-104857faccafd81c cost-info",children:[(0,n.jsxs)("div",{className:"jsx-104857faccafd81c cost-item",children:[(0,n.jsx)("span",{className:"jsx-104857faccafd81c cost-type",children:"\ud83d\udcda Lesson Plan"}),(0,n.jsxs)("span",{className:"jsx-104857faccafd81c cost-amount",children:[l.creditCosts.lesson_plan||3," credits"]})]}),(0,n.jsxs)("div",{className:"jsx-104857faccafd81c cost-item",children:[(0,n.jsx)("span",{className:"jsx-104857faccafd81c cost-type",children:"\u2753 Quiz"}),(0,n.jsxs)("span",{className:"jsx-104857faccafd81c cost-amount",children:[l.creditCosts.quiz||2," credits"]})]}),(0,n.jsxs)("div",{className:"jsx-104857faccafd81c cost-item",children:[(0,n.jsx)("span",{className:"jsx-104857faccafd81c cost-type",children:"\ud83d\udcca Presentation"}),(0,n.jsxs)("span",{className:"jsx-104857faccafd81c cost-amount",children:[l.creditCosts.presentation||4," credits"]})]})]})}),(0,n.jsx)(v(),{id:"104857faccafd81c",children:".credits-display.jsx-104857faccafd81c{background:-webkit-linear-gradient(315deg,#f8fafc 0%,#f1f5f9 100%);background:-moz-linear-gradient(315deg,#f8fafc 0%,#f1f5f9 100%);background:-o-linear-gradient(315deg,#f8fafc 0%,#f1f5f9 100%);background:linear-gradient(135deg,#f8fafc 0%,#f1f5f9 100%);border:2px solid#e2e8f0;-webkit-border-radius:16px;-moz-border-radius:16px;border-radius:16px;padding:1rem;margin:1rem 0;-webkit-transition:all.3s ease;-moz-transition:all.3s ease;-o-transition:all.3s ease;transition:all.3s ease}.credits-display.jsx-104857faccafd81c:hover{border-color:#3b9bff;-webkit-transform:translateY(-2px);-moz-transform:translateY(-2px);-ms-transform:translateY(-2px);-o-transform:translateY(-2px);transform:translateY(-2px);-webkit-box-shadow:0 8px 25px rgba(59,155,255,.15);-moz-box-shadow:0 8px 25px rgba(59,155,255,.15);box-shadow:0 8px 25px rgba(59,155,255,.15)}.credits-main.jsx-104857faccafd81c{cursor:pointer;margin-bottom:1rem}.credits-info.jsx-104857faccafd81c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:.5rem}.credits-count.jsx-104857faccafd81c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:baseline;-webkit-align-items:baseline;-moz-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;gap:.5rem}.add-credits-btn.jsx-104857faccafd81c{background:-webkit-linear-gradient(315deg,#3b9bff 0%,#2563eb 100%);background:-moz-linear-gradient(315deg,#3b9bff 0%,#2563eb 100%);background:-o-linear-gradient(315deg,#3b9bff 0%,#2563eb 100%);background:linear-gradient(135deg,#3b9bff 0%,#2563eb 100%);color:white;border:none;padding:.4rem .8rem;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;font-size:.75rem;font-weight:600;cursor:pointer;-webkit-transition:all.2s ease;-moz-transition:all.2s ease;-o-transition:all.2s ease;transition:all.2s ease;margin-left:.5rem;white-space:nowrap}.add-credits-btn.jsx-104857faccafd81c:hover{background:-webkit-linear-gradient(315deg,#2563eb 0%,#1d4ed8 100%);background:-moz-linear-gradient(315deg,#2563eb 0%,#1d4ed8 100%);background:-o-linear-gradient(315deg,#2563eb 0%,#1d4ed8 100%);background:linear-gradient(135deg,#2563eb 0%,#1d4ed8 100%);-webkit-transform:translateY(-1px);-moz-transform:translateY(-1px);-ms-transform:translateY(-1px);-o-transform:translateY(-1px);transform:translateY(-1px);-webkit-box-shadow:0 4px 12px rgba(37,99,235,.3);-moz-box-shadow:0 4px 12px rgba(37,99,235,.3);box-shadow:0 4px 12px rgba(37,99,235,.3)}.add-credits-btn.jsx-104857faccafd81c:active{-webkit-transform:translateY(0);-moz-transform:translateY(0);-ms-transform:translateY(0);-o-transform:translateY(0);transform:translateY(0)}.credits-number.jsx-104857faccafd81c{font-size:2rem;font-weight:bold;line-height:1}.credits-label.jsx-104857faccafd81c{font-size:.9rem;color:#64748b;font-weight:500}.tier-info.jsx-104857faccafd81c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:.5rem;background:rgba(255,255,255,.8);padding:.25rem .75rem;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;border:1px solid rgba(0,0,0,.1)}.tier-icon.jsx-104857faccafd81c{font-size:1.2rem}.tier-name.jsx-104857faccafd81c{font-weight:600;font-size:.9rem}.low-credits-warning.jsx-104857faccafd81c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:.5rem;background:-webkit-linear-gradient(315deg,#fef3c7 0%,#fde68a 100%);background:-moz-linear-gradient(315deg,#fef3c7 0%,#fde68a 100%);background:-o-linear-gradient(315deg,#fef3c7 0%,#fde68a 100%);background:linear-gradient(135deg,#fef3c7 0%,#fde68a 100%);color:#92400e;padding:.5rem .75rem;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;border:1px solid#f59e0b;font-size:.85rem;font-weight:500;-webkit-animation:pulse 2s infinite;-moz-animation:pulse 2s infinite;-o-animation:pulse 2s infinite;animation:pulse 2s infinite}.warning-icon.jsx-104857faccafd81c{font-size:1rem}.credits-breakdown.jsx-104857faccafd81c{border-top:1px solid#e2e8f0;padding-top:1rem}.cost-info.jsx-104857faccafd81c{display:grid;gap:.5rem}.cost-item.jsx-104857faccafd81c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;font-size:.85rem}.cost-type.jsx-104857faccafd81c{color:#64748b;font-weight:500}.cost-amount.jsx-104857faccafd81c{color:#3b9bff;font-weight:600}.loading.jsx-104857faccafd81c{opacity:.6}.credits-skeleton.jsx-104857faccafd81c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.skeleton-text.jsx-104857faccafd81c,.skeleton-number.jsx-104857faccafd81c{background:-webkit-linear-gradient(left,#f1f5f9 25%,#e2e8f0 50%,#f1f5f9 75%);background:-moz-linear-gradient(left,#f1f5f9 25%,#e2e8f0 50%,#f1f5f9 75%);background:-o-linear-gradient(left,#f1f5f9 25%,#e2e8f0 50%,#f1f5f9 75%);background:linear-gradient(90deg,#f1f5f9 25%,#e2e8f0 50%,#f1f5f9 75%);-webkit-background-size:200%100%;-moz-background-size:200%100%;-o-background-size:200%100%;background-size:200%100%;-webkit-animation:loading 1.5s infinite;-moz-animation:loading 1.5s infinite;-o-animation:loading 1.5s infinite;animation:loading 1.5s infinite;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.skeleton-text.jsx-104857faccafd81c{width:80px;height:16px}.skeleton-number.jsx-104857faccafd81c{width:60px;height:24px}.error.jsx-104857faccafd81c{background:-webkit-linear-gradient(315deg,#fef2f2 0%,#fee2e2 100%);background:-moz-linear-gradient(315deg,#fef2f2 0%,#fee2e2 100%);background:-o-linear-gradient(315deg,#fef2f2 0%,#fee2e2 100%);background:linear-gradient(135deg,#fef2f2 0%,#fee2e2 100%);border-color:#f87171;color:#dc2626}.error-icon.jsx-104857faccafd81c{margin-right:.5rem}@-webkit-keyframes pulse{0%,100%{opacity:1}50%{opacity:.7}}@-moz-keyframes pulse{0%,100%{opacity:1}50%{opacity:.7}}@-o-keyframes pulse{0%,100%{opacity:1}50%{opacity:.7}}@keyframes pulse{0%,100%{opacity:1}50%{opacity:.7}}@-webkit-keyframes loading{0%{background-position:200%0}100%{background-position:-200%0}}@-moz-keyframes loading{0%{background-position:200%0}100%{background-position:-200%0}}@-o-keyframes loading{0%{background-position:200%0}100%{background-position:-200%0}}@keyframes loading{0%{background-position:200%0}100%{background-position:-200%0}}@media(max-width:768px){.credits-display.jsx-104857faccafd81c{padding:.75rem;margin:.75rem 0}.credits-number.jsx-104857faccafd81c{font-size:1.5rem}.cost-info.jsx-104857faccafd81c{grid-template-columns:1fr;gap:.25rem}.cost-item.jsx-104857faccafd81c{font-size:.8rem}}"})]})},k=a(3454),N=(0,b.eI)("https://fnbmngpucvahupgyxzre.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZuYm1uZ3B1Y3ZhaHVwZ3l4enJlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA5NjY1MDQsImV4cCI6MjA3NjU0MjUwNH0.xOP4I9ysM3XkPQZvnD63iXf79sHhhrakaCBoR1-8T9E");var S=a(3454),C=function(e){var s=e.isOpen,a=e.onClose,c=(e.onPurchaseSuccess,(0,i.useState)([])),o=c[0],l=c[1],d=(0,i.useState)([]),u=d[0],m=d[1],f=(0,i.useState)(!0),p=f[0],b=f[1],h=(0,i.useState)("packages"),x=h[0],g=h[1],j=(0,i.useState)(null),w=j[0],y=j[1],C=(0,i.useState)(null),z=C[0],P=C[1],I=function(){var e=(0,i.useState)(!1),s=e[0],a=e[1],n=(0,i.useState)(null),c=n[0],o=n[1],l=function(){var e=(0,t.Z)((function(){var e;return(0,r.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,fetch("".concat(k.env.NEXT_PUBLIC_BACKEND,"/payment/config"))];case 1:return[4,s.sent().json()];case 2:return[2,s.sent()];case 3:return e=s.sent(),console.error("Error getting payment config:",e),[2,null];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),d=function(){var e=(0,t.Z)((function(e){var s,n,i,c,l;return(0,r.__generator)(this,(function(d){switch(d.label){case 0:a(!0),o(null),d.label=1;case 1:return d.trys.push([1,5,,6]),[4,N.auth.getUser()];case 2:if(s=d.sent(),!(n=s.data.user))throw new Error("User not authenticated");return[4,fetch("".concat(k.env.NEXT_PUBLIC_BACKEND,"/payment/razorpay/order"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:n.id,packageId:e})})];case 3:return[4,d.sent().json()];case 4:if(!(i=d.sent()).success)throw new Error(i.error||"Failed to create order");return(c=document.createElement("script")).src="https://checkout.razorpay.com/v1/checkout.js",c.async=!0,document.body.appendChild(c),c.onload=function(){var s={key:i.key,amount:i.amount,currency:i.currency,name:"TeachWise AI",description:"".concat(i.package.name," - ").concat(i.package.credits," credits"),order_id:i.orderId,prefill:{name:i.user.name||"",email:i.user.email||""},theme:{color:"#3B82F6"},handler:function(){var s=(0,t.Z)((function(s){var a;return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,fetch("".concat(k.env.NEXT_PUBLIC_BACKEND,"/payment/razorpay/verify"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:i.orderId,paymentId:s.razorpay_payment_id,signature:s.razorpay_signature,userId:n.id,packageId:e})})];case 1:return[4,t.sent().json()];case 2:if(!t.sent().success)throw new Error("Payment verification failed");return window.location.href="/payment/success",[3,4];case 3:return a=t.sent(),console.error("Error verifying payment:",a),o(a.message),window.location.href="/payment/failed",[3,4];case 4:return[2]}}))}));return function(e){return s.apply(this,arguments)}}(),modal:{ondismiss:function(){a(!1),o("Payment cancelled by user")}}};new window.Razorpay(s).open()},c.onerror=function(){a(!1),o("Failed to load payment gateway")},[3,6];case 5:return l=d.sent(),console.error("Error purchasing credits with Razorpay:",l),o(l.message),a(!1),[3,6];case 6:return[2]}}))}));return function(s){return e.apply(this,arguments)}}();return{loading:s,error:c,getPaymentConfig:l,purchaseCreditsWithRazorpay:d}}(),E=I.loading,_=I.error,T=I.getPaymentConfig,A=I.purchaseCreditsWithRazorpay;(0,i.useEffect)((function(){s&&(L(),F())}),[s]);var F=function(){var e=(0,t.Z)((function(){var e;return(0,r.__generator)(this,(function(s){switch(s.label){case 0:return[4,T()];case 1:return e=s.sent(),P(e),[2]}}))}));return function(){return e.apply(this,arguments)}}(),L=function(){var e=(0,t.Z)((function(){var e,s,a,t,n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,6,7]),b(!0),[4,fetch("".concat(S.env.NEXT_PUBLIC_BACKEND,"/credits/packages"))];case 1:return[4,(e=r.sent()).json()];case 2:return s=r.sent(),[4,fetch("".concat(S.env.NEXT_PUBLIC_BACKEND,"/credits/plans"))];case 3:return[4,(a=r.sent()).json()];case 4:return t=r.sent(),e.ok&&l(s.packages||[]),a.ok&&m(t.plans||[]),[3,7];case 5:return n=r.sent(),console.error("Error fetching purchase options:",n),y("Failed to load purchase options"),[3,7];case 6:return b(!1),[7];case 7:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),O=function(){var e=(0,t.Z)((function(e){var s,a;return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),y(null),(null===z||void 0===z||null===(s=z.razorpay)||void 0===s?void 0:s.enabled)?[4,A(e.id)]:[3,2];case 1:return t.sent(),[3,3];case 2:y("Razorpay payment is not available"),t.label=3;case 3:return[3,5];case 4:return a=t.sent(),console.error("Purchase error:",a),y(a.message),[3,5];case 5:return[2]}}))}));return function(s){return e.apply(this,arguments)}}(),R=function(){var e=(0,t.Z)((function(e){return(0,r.__generator)(this,(function(e){try{y(null),y("Subscriptions are temporarily unavailable. Please purchase credit packages instead.")}catch(s){console.error("Subscription error:",s),y(s.message)}return[2]}))}));return function(s){return e.apply(this,arguments)}}(),Z=function(e){switch(e){case"basic":return"#3b82f6";case"pro":return"#8b5cf6";case"enterprise":return"#f59e0b";default:return"#64748b"}};return s?(0,n.jsx)("div",{className:"modal-overlay",onClick:a,children:(0,n.jsxs)("div",{onClick:function(e){return e.stopPropagation()},className:"jsx-4be04c7ef8da8bac modal-content",children:[(0,n.jsxs)("div",{className:"jsx-4be04c7ef8da8bac modal-header",children:[(0,n.jsx)("h2",{className:"jsx-4be04c7ef8da8bac",children:"\ud83d\udcb0 Get More Credits"}),(0,n.jsx)("button",{onClick:a,className:"jsx-4be04c7ef8da8bac close-button",children:"\xd7"})]}),(0,n.jsxs)("div",{className:"jsx-4be04c7ef8da8bac tab-navigation",children:[(0,n.jsx)("button",{onClick:function(){return g("packages")},className:"jsx-4be04c7ef8da8bac "+"tab-button ".concat("packages"===x?"active":""),children:"\ud83c\udfaf Credit Packages"}),(0,n.jsx)("button",{onClick:function(){return g("subscription")},className:"jsx-4be04c7ef8da8bac "+"tab-button ".concat("subscription"===x?"active":""),children:"\ud83d\udd04 Monthly Plans"})]}),(w||_)&&(0,n.jsxs)("div",{className:"jsx-4be04c7ef8da8bac error-banner",children:[(0,n.jsx)("span",{className:"jsx-4be04c7ef8da8bac error-icon",children:"\u26a0\ufe0f"}),(0,n.jsx)("span",{className:"jsx-4be04c7ef8da8bac",children:w||_}),(0,n.jsx)("button",{onClick:function(){return y(null)},className:"jsx-4be04c7ef8da8bac",children:"\xd7"})]}),(0,n.jsx)("div",{className:"jsx-4be04c7ef8da8bac modal-body",children:p?(0,n.jsxs)("div",{className:"jsx-4be04c7ef8da8bac loading-state",children:[(0,n.jsx)("div",{className:"jsx-4be04c7ef8da8bac loading-spinner"}),(0,n.jsx)("p",{className:"jsx-4be04c7ef8da8bac",children:"Loading purchase options..."})]}):(0,n.jsxs)(n.Fragment,{children:["packages"===x&&(0,n.jsxs)("div",{className:"jsx-4be04c7ef8da8bac packages-section",children:[(0,n.jsxs)("div",{className:"jsx-4be04c7ef8da8bac section-header",children:[(0,n.jsx)("h3",{className:"jsx-4be04c7ef8da8bac",children:"\ud83d\udc8e One-time Credit Packages"}),(0,n.jsx)("p",{className:"jsx-4be04c7ef8da8bac",children:"Perfect for occasional use. Credits never expire!"})]}),(0,n.jsx)("div",{className:"jsx-4be04c7ef8da8bac packages-grid",children:o.map((function(e){var s;return(0,n.jsxs)("div",{className:"jsx-4be04c7ef8da8bac package-card",children:[(0,n.jsxs)("div",{className:"jsx-4be04c7ef8da8bac package-header",children:[(0,n.jsx)("h4",{className:"jsx-4be04c7ef8da8bac",children:e.name}),(0,n.jsxs)("div",{className:"jsx-4be04c7ef8da8bac credits-amount",children:[e.credits," Credits"]})]}),(0,n.jsxs)("div",{className:"jsx-4be04c7ef8da8bac package-pricing",children:[(0,n.jsxs)("div",{className:"jsx-4be04c7ef8da8bac price",children:[(0,n.jsx)("span",{className:"jsx-4be04c7ef8da8bac currency",children:"$"}),(0,n.jsx)("span",{className:"jsx-4be04c7ef8da8bac amount",children:e.price_usd})]}),(0,n.jsxs)("div",{className:"jsx-4be04c7ef8da8bac price-per-credit",children:["$",(e.price_usd/e.credits).toFixed(3)," per credit"]})]}),(0,n.jsxs)("div",{className:"jsx-4be04c7ef8da8bac package-features",children:[(0,n.jsx)("div",{className:"jsx-4be04c7ef8da8bac feature",children:"\u2705 Never expires"}),(0,n.jsx)("div",{className:"jsx-4be04c7ef8da8bac feature",children:"\u26a1 Instant activation"}),(0,n.jsx)("div",{className:"jsx-4be04c7ef8da8bac feature",children:"\ud83d\udd04 Works with all tools"})]}),(0,n.jsx)("div",{className:"jsx-4be04c7ef8da8bac payment-buttons",children:(null===z||void 0===z||null===(s=z.razorpay)||void 0===s?void 0:s.enabled)&&(0,n.jsx)("button",{onClick:function(){return O(e)},disabled:E,className:"jsx-4be04c7ef8da8bac purchase-button razorpay",children:E?"\u23f3 Processing...":"\ud83d\udcb0 Pay \u20b9".concat(e.price_inr)})})]},e.id)}))})]}),"subscription"===x&&(0,n.jsxs)("div",{className:"jsx-4be04c7ef8da8bac subscription-section",children:[(0,n.jsxs)("div",{className:"jsx-4be04c7ef8da8bac section-header",children:[(0,n.jsx)("h3",{className:"jsx-4be04c7ef8da8bac",children:"\ud83d\udcc5 Monthly Subscription Plans"}),(0,n.jsx)("p",{className:"jsx-4be04c7ef8da8bac",children:"Best value for regular users. Credits reset monthly!"})]}),(0,n.jsx)("div",{className:"jsx-4be04c7ef8da8bac plans-grid",children:u.map((function(e){return(0,n.jsxs)("div",{className:"jsx-4be04c7ef8da8bac "+"plan-card ".concat("pro"===e.tier?"featured":""),children:["pro"===e.tier&&(0,n.jsx)("div",{className:"jsx-4be04c7ef8da8bac featured-badge",children:"\ud83d\udd25 Most Popular"}),(0,n.jsxs)("div",{className:"jsx-4be04c7ef8da8bac plan-header",children:[(0,n.jsx)("h4",{style:{color:Z(e.tier)},className:"jsx-4be04c7ef8da8bac",children:e.name}),(0,n.jsx)("div",{className:"jsx-4be04c7ef8da8bac plan-pricing",children:(0,n.jsxs)("span",{className:"jsx-4be04c7ef8da8bac price",children:[(0,n.jsx)("span",{className:"jsx-4be04c7ef8da8bac currency",children:"$"}),(0,n.jsx)("span",{className:"jsx-4be04c7ef8da8bac amount",children:e.price_usd}),(0,n.jsx)("span",{className:"jsx-4be04c7ef8da8bac period",children:"/month"})]})})]}),(0,n.jsxs)("div",{className:"jsx-4be04c7ef8da8bac plan-credits",children:[(0,n.jsxs)("div",{className:"jsx-4be04c7ef8da8bac credits-per-month",children:[999999===e.monthly_credits?"Unlimited":e.monthly_credits,999999!==e.monthly_credits&&" credits/month"]}),999999!==e.monthly_credits&&(0,n.jsxs)("div",{className:"jsx-4be04c7ef8da8bac credits-value",children:["$",(e.price_usd/e.monthly_credits).toFixed(3)," per credit"]})]}),(0,n.jsx)("div",{className:"jsx-4be04c7ef8da8bac plan-features",children:JSON.parse(e.features||"[]").map((function(e,s){return(0,n.jsxs)("div",{className:"jsx-4be04c7ef8da8bac feature",children:["\u2705 ",e]},s)}))}),(0,n.jsx)("button",{onClick:function(){return R(e)},disabled:purchasing,className:"jsx-4be04c7ef8da8bac "+"subscribe-button ".concat("pro"===e.tier?"featured":""),children:purchasing?"Processing...":"Subscribe to ".concat(e.name)})]},e.id)}))})]})]})}),(0,n.jsx)("div",{className:"jsx-4be04c7ef8da8bac modal-footer",children:(0,n.jsx)("div",{className:"jsx-4be04c7ef8da8bac security-info",children:"\ud83d\udd12 Secure payment powered by Razorpay \u2022 30-day money-back guarantee"})}),(0,n.jsx)(v(),{id:"4be04c7ef8da8bac",children:".modal-overlay.jsx-4be04c7ef8da8bac{position:fixed;inset:0;background:rgba(6,10,15,.88);-webkit-backdrop-filter:blur(8px)saturate(120%);backdrop-filter:blur(8px)saturate(120%);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;z-index:1000;padding:1rem}.modal-content.jsx-4be04c7ef8da8bac{background:-webkit-linear-gradient(top,#0b1220 0%,#0f1724 100%);background:-moz-linear-gradient(top,#0b1220 0%,#0f1724 100%);background:-o-linear-gradient(top,#0b1220 0%,#0f1724 100%);background:linear-gradient(180deg,#0b1220 0%,#0f1724 100%);-webkit-border-radius:16px;-moz-border-radius:16px;border-radius:16px;max-width:900px;width:100%;max-height:90vh;overflow-y:auto;-webkit-box-shadow:0 24px 80px rgba(2,6,23,.7);-moz-box-shadow:0 24px 80px rgba(2,6,23,.7);box-shadow:0 24px 80px rgba(2,6,23,.7);border:1px solid rgba(255,255,255,.03);color:#e6eef8}.modal-header.jsx-4be04c7ef8da8bac{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:1.4rem 1.8rem;border-bottom:1px solid rgba(255,255,255,.03);background:-webkit-linear-gradient(top,rgba(255,255,255,.02),transparent);background:-moz-linear-gradient(top,rgba(255,255,255,.02),transparent);background:-o-linear-gradient(top,rgba(255,255,255,.02),transparent);background:linear-gradient(180deg,rgba(255,255,255,.02),transparent)}.modal-header.jsx-4be04c7ef8da8bac h2.jsx-4be04c7ef8da8bac{margin:0;font-size:1.3rem;color:#e6eef8;font-weight:700}.close-button.jsx-4be04c7ef8da8bac{background:none;border:none;font-size:1.5rem;cursor:pointer;color:#9fb3c8;width:36px;height:36px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-transition:all.12s ease;-moz-transition:all.12s ease;-o-transition:all.12s ease;transition:all.12s ease}.close-button.jsx-4be04c7ef8da8bac:hover{background:rgba(255,255,255,.02);color:#fff}.tab-navigation.jsx-4be04c7ef8da8bac{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;border-bottom:1px solid rgba(255,255,255,.03)}.tab-button.jsx-4be04c7ef8da8bac{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;padding:.9rem 1.5rem;background:none;border:none;font-size:.9rem;font-weight:600;cursor:pointer;-webkit-transition:all.12s ease;-moz-transition:all.12s ease;-o-transition:all.12s ease;transition:all.12s ease;color:#9fb3c8;border-bottom:3px solid transparent}.tab-button.active.jsx-4be04c7ef8da8bac{color:#06d6a0;border-bottom-color:#06d6a0;background:-webkit-linear-gradient(top,transparent,rgba(6,214,160,.04));background:-moz-linear-gradient(top,transparent,rgba(6,214,160,.04));background:-o-linear-gradient(top,transparent,rgba(6,214,160,.04));background:linear-gradient(to bottom,transparent,rgba(6,214,160,.04))}.tab-button.jsx-4be04c7ef8da8bac:hover:not(.active){background:rgba(255,255,255,.01);color:#e6eef8}.error-banner.jsx-4be04c7ef8da8bac{background:rgba(220,38,38,.08);color:#ffb3b3;padding:.9rem 1.5rem;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:.5rem;border-bottom:1px solid rgba(220,38,38,.15);font-size:.85rem}.error-banner.jsx-4be04c7ef8da8bac button.jsx-4be04c7ef8da8bac{background:none;border:none;color:#ffb3b3;cursor:pointer;font-size:1.1rem;margin-left:auto}.modal-body.jsx-4be04c7ef8da8bac{padding:1.5rem 1.8rem}.loading-state.jsx-4be04c7ef8da8bac{text-align:center;padding:3rem}.loading-spinner.jsx-4be04c7ef8da8bac{width:40px;height:40px;border:4px solid rgba(255,255,255,.04);border-top:4px solid#06d6a0;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;-webkit-animation:spin 1s linear infinite;-moz-animation:spin 1s linear infinite;-o-animation:spin 1s linear infinite;animation:spin 1s linear infinite;margin:0 auto 1rem}.section-header.jsx-4be04c7ef8da8bac{text-align:center;margin-bottom:1.5rem}.section-header.jsx-4be04c7ef8da8bac h3.jsx-4be04c7ef8da8bac{margin:0 0 .4rem 0;font-size:1.2rem;color:#e6eef8}.section-header.jsx-4be04c7ef8da8bac p.jsx-4be04c7ef8da8bac{margin:0;color:#a8c0cf;font-size:.9rem}.packages-grid.jsx-4be04c7ef8da8bac,.plans-grid.jsx-4be04c7ef8da8bac{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.2rem}.package-card.jsx-4be04c7ef8da8bac,.plan-card.jsx-4be04c7ef8da8bac{background:rgba(255,255,255,.01);border:1px solid rgba(255,255,255,.06);-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;padding:1.3rem;-webkit-transition:all.14s ease;-moz-transition:all.14s ease;-o-transition:all.14s ease;transition:all.14s ease;position:relative}.package-card.jsx-4be04c7ef8da8bac:hover,.plan-card.jsx-4be04c7ef8da8bac:hover{-webkit-transform:translateY(-2px);-moz-transform:translateY(-2px);-ms-transform:translateY(-2px);-o-transform:translateY(-2px);transform:translateY(-2px);-webkit-box-shadow:0 12px 30px rgba(6,178,160,.08);-moz-box-shadow:0 12px 30px rgba(6,178,160,.08);box-shadow:0 12px 30px rgba(6,178,160,.08);border-color:rgba(6,178,160,.4);background:rgba(255,255,255,.015)}.plan-card.featured.jsx-4be04c7ef8da8bac{border-color:rgba(6,178,160,.5);background:rgba(6,178,160,.02)}.featured-badge.jsx-4be04c7ef8da8bac{position:absolute;top:-10px;left:50%;-webkit-transform:translateX(-50%);-moz-transform:translateX(-50%);-ms-transform:translateX(-50%);-o-transform:translateX(-50%);transform:translateX(-50%);background:-webkit-linear-gradient(left,#06b6d4 0%,#06d6a0 100%);background:-moz-linear-gradient(left,#06b6d4 0%,#06d6a0 100%);background:-o-linear-gradient(left,#06b6d4 0%,#06d6a0 100%);background:linear-gradient(90deg,#06b6d4 0%,#06d6a0 100%);color:#022b25;padding:.4rem .9rem;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;font-size:.75rem;font-weight:700}.package-header.jsx-4be04c7ef8da8bac h4.jsx-4be04c7ef8da8bac,.plan-header.jsx-4be04c7ef8da8bac h4.jsx-4be04c7ef8da8bac{margin:0 0 .4rem 0;font-size:1.1rem;color:#e6eef8}.credits-amount.jsx-4be04c7ef8da8bac{font-size:1.6rem;font-weight:bold;color:#06d6a0;margin-bottom:.8rem}.package-pricing.jsx-4be04c7ef8da8bac,.plan-pricing.jsx-4be04c7ef8da8bac{margin-bottom:1.2rem}.price.jsx-4be04c7ef8da8bac{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:baseline;-webkit-align-items:baseline;-moz-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;gap:.25rem;margin-bottom:.25rem}.currency.jsx-4be04c7ef8da8bac{font-size:.9rem;color:#a8c0cf}.amount.jsx-4be04c7ef8da8bac{font-size:1.8rem;font-weight:bold;color:#e6eef8}.period.jsx-4be04c7ef8da8bac{font-size:.9rem;color:#a8c0cf}.price-per-credit.jsx-4be04c7ef8da8bac,.credits-value.jsx-4be04c7ef8da8bac{font-size:.8rem;color:#9fb3c8}.credits-per-month.jsx-4be04c7ef8da8bac{font-size:1.3rem;font-weight:bold;color:#06d6a0;margin-bottom:.25rem}.package-features.jsx-4be04c7ef8da8bac,.plan-features.jsx-4be04c7ef8da8bac{margin-bottom:1.2rem}.feature.jsx-4be04c7ef8da8bac{font-size:.85rem;color:#a8c0cf;margin-bottom:.4rem}.payment-buttons.jsx-4be04c7ef8da8bac{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:.5rem;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.purchase-button.jsx-4be04c7ef8da8bac,.subscribe-button.jsx-4be04c7ef8da8bac{width:100%;background:-webkit-linear-gradient(left,#06b6d4 0%,#06d6a0 100%);background:-moz-linear-gradient(left,#06b6d4 0%,#06d6a0 100%);background:-o-linear-gradient(left,#06b6d4 0%,#06d6a0 100%);background:linear-gradient(90deg,#06b6d4 0%,#06d6a0 100%);color:#022b25;border:none;padding:.7rem 1.3rem;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;font-weight:700;cursor:pointer;-webkit-transition:all.14s ease;-moz-transition:all.14s ease;-o-transition:all.14s ease;transition:all.14s ease;-webkit-box-shadow:0 6px 18px rgba(6,178,160,.12);-moz-box-shadow:0 6px 18px rgba(6,178,160,.12);box-shadow:0 6px 18px rgba(6,178,160,.12)}.purchase-button.razorpay.jsx-4be04c7ef8da8bac{background:-webkit-linear-gradient(left,#06b6d4 0%,#06d6a0 100%);background:-moz-linear-gradient(left,#06b6d4 0%,#06d6a0 100%);background:-o-linear-gradient(left,#06b6d4 0%,#06d6a0 100%);background:linear-gradient(90deg,#06b6d4 0%,#06d6a0 100%)}.subscribe-button.featured.jsx-4be04c7ef8da8bac{background:-webkit-linear-gradient(left,#06b6d4 0%,#06d6a0 100%);background:-moz-linear-gradient(left,#06b6d4 0%,#06d6a0 100%);background:-o-linear-gradient(left,#06b6d4 0%,#06d6a0 100%);background:linear-gradient(90deg,#06b6d4 0%,#06d6a0 100%)}.purchase-button.jsx-4be04c7ef8da8bac:hover,.subscribe-button.jsx-4be04c7ef8da8bac:hover{-webkit-transform:translateY(-2px);-moz-transform:translateY(-2px);-ms-transform:translateY(-2px);-o-transform:translateY(-2px);transform:translateY(-2px);-webkit-box-shadow:0 10px 30px rgba(6,178,160,.16);-moz-box-shadow:0 10px 30px rgba(6,178,160,.16);box-shadow:0 10px 30px rgba(6,178,160,.16);-webkit-filter:brightness(1.03);filter:brightness(1.03)}.subscribe-button.featured.jsx-4be04c7ef8da8bac:hover{-webkit-box-shadow:0 10px 30px rgba(6,178,160,.16);-moz-box-shadow:0 10px 30px rgba(6,178,160,.16);box-shadow:0 10px 30px rgba(6,178,160,.16)}.purchase-button.jsx-4be04c7ef8da8bac:disabled,.subscribe-button.jsx-4be04c7ef8da8bac:disabled{opacity:.6;cursor:not-allowed;-webkit-transform:none;-moz-transform:none;-ms-transform:none;-o-transform:none;transform:none}.modal-footer.jsx-4be04c7ef8da8bac{background:rgba(255,255,255,.01);padding:1rem 1.8rem;text-align:center;-webkit-border-radius:0 0 16px 16px;-moz-border-radius:0 0 16px 16px;border-radius:0 0 16px 16px}.security-info.jsx-4be04c7ef8da8bac{font-size:.8rem;color:#9fb3c8}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@media(max-width:768px){.modal-content.jsx-4be04c7ef8da8bac{margin:0;-webkit-border-radius:16px 16px 0 0;-moz-border-radius:16px 16px 0 0;border-radius:16px 16px 0 0;max-height:95vh}.modal-header.jsx-4be04c7ef8da8bac,.modal-body.jsx-4be04c7ef8da8bac,.modal-footer.jsx-4be04c7ef8da8bac{padding:1rem}.tab-button.jsx-4be04c7ef8da8bac{padding:.75rem 1rem;font-size:.9rem}.packages-grid.jsx-4be04c7ef8da8bac,.plans-grid.jsx-4be04c7ef8da8bac{grid-template-columns:1fr;gap:1rem}}"})]})}):null};function z(e){var s=e.onClose,a=(0,i.useState)(1),c=a[0],o=a[1],l=(0,i.useState)(""),d=l[0],u=l[1],m=(0,i.useState)(""),f=m[0],p=m[1],b=(0,i.useState)(""),h=b[0],x=b[1],g=(0,i.useState)(""),j=g[0],w=g[1],v=(0,i.useState)(""),y=v[0],k=v[1],N=(0,i.useState)(""),S=N[0],C=N[1],z=(0,i.useState)(!1),P=z[0],I=z[1],E=(0,i.useState)(!1),_=E[0],T=E[1],A=(0,i.useState)(!1),F=A[0],L=A[1];(0,i.useEffect)((function(){var e=function(){o(1),u(""),p(""),x(""),w(""),k(""),C("")};return window.addEventListener("openForgotPasswordModal",e),function(){return window.removeEventListener("openForgotPasswordModal",e)}}),[]);var O=function(){var e=(0,t.Z)((function(e){var s,a,t;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:e.preventDefault(),I(!0),C(""),k(""),r.label=1;case 1:return r.trys.push([1,4,5,6]),[4,fetch("http://localhost:3003/api/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d})})];case 2:return[4,(s=r.sent()).json()];case 3:return a=r.sent(),s.ok?(k(a.message),o(2),C("")):(C(a.error||"Failed to send reset code"),k("")),[3,6];case 4:return t=r.sent(),console.error("Error requesting password reset:",t),C("Failed to send reset code. Please try again."),[3,6];case 5:return I(!1),[7];case 6:return[2]}}))}));return function(s){return e.apply(this,arguments)}}(),R=function(){var e=(0,t.Z)((function(e){var a,t,n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:if(e.preventDefault(),h.length<6)return C("Password must be at least 6 characters"),[2];if(h!==j)return C("Passwords do not match"),[2];I(!0),C(""),k(""),r.label=1;case 1:return r.trys.push([1,4,5,6]),[4,fetch("http://localhost:3003/api/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d,resetCode:f,newPassword:h})})];case 2:return[4,(a=r.sent()).json()];case 3:return t=r.sent(),a.ok?(k(t.message),o(3),C(""),setTimeout((function(){return s()}),2500)):(C(t.error||"Failed to reset password"),k("")),[3,6];case 4:return n=r.sent(),console.error("Error resetting password:",n),C("Failed to reset password. Please try again."),[3,6];case 5:return I(!1),[7];case 6:return[2]}}))}));return function(s){return e.apply(this,arguments)}}();return(0,n.jsx)("div",{className:"forgot-password-overlay",children:(0,n.jsxs)("div",{className:"forgot-password-modal",children:[(0,n.jsxs)("div",{className:"modal-header",children:[(0,n.jsx)("h2",{children:"Reset Password"}),(0,n.jsx)("button",{onClick:s,className:"modal-close"})]}),1===c&&(0,n.jsxs)("form",{onSubmit:O,className:"reset-form",children:[(0,n.jsx)("p",{style:{marginBottom:"12px",color:"#bfcbd6",fontSize:"13px"},children:"Enter your email address and we'll send you a reset code."}),(0,n.jsxs)("div",{className:"form-field",children:[(0,n.jsx)("label",{htmlFor:"reset-email",children:"Email Address"}),(0,n.jsx)("input",{id:"reset-email",type:"email",placeholder:"Enter your email",value:d,onChange:function(e){return u(e.target.value)},required:!0,autoFocus:!0})]}),S&&(0,n.jsxs)("div",{className:"error-message",children:[" ",S]}),y&&(0,n.jsx)("div",{className:"success-message",children:y}),(0,n.jsx)("button",{type:"submit",className:"submit-btn",disabled:P,children:P?" Sending...":" Send Reset Code"})]}),2===c&&(0,n.jsxs)("form",{onSubmit:R,className:"reset-form",children:[(0,n.jsxs)("p",{style:{marginBottom:"12px",color:"#bfcbd6",fontSize:"13px"},children:["Enter the 6-digit code sent to ",(0,n.jsx)("strong",{children:d})]}),(0,n.jsxs)("div",{className:"form-field",children:[(0,n.jsx)("label",{htmlFor:"reset-code",children:"Reset Code"}),(0,n.jsx)("input",{id:"reset-code",type:"text",placeholder:"000000",value:f,onChange:function(e){return p(e.target.value.replace(/\D/g,"").slice(0,6))},required:!0,autoFocus:!0,style:{fontSize:"18px",letterSpacing:"3px",textAlign:"center",fontFamily:"monospace"}})]}),(0,n.jsxs)("div",{className:"form-field",children:[(0,n.jsx)("label",{htmlFor:"new-password",children:"New Password"}),(0,n.jsxs)("div",{className:"password-input-container",children:[(0,n.jsx)("input",{id:"new-password",type:_?"text":"password",placeholder:"Enter new password (min 6 characters)",value:h,onChange:function(e){return x(e.target.value)},required:!0}),(0,n.jsx)("button",{type:"button",className:"password-toggle",onClick:function(){return T(!_)},children:""})]})]}),(0,n.jsxs)("div",{className:"form-field",children:[(0,n.jsx)("label",{htmlFor:"confirm-new-password",children:"Confirm Password"}),(0,n.jsxs)("div",{className:"password-input-container",children:[(0,n.jsx)("input",{id:"confirm-new-password",type:F?"text":"password",placeholder:"Confirm new password",value:j,onChange:function(e){return w(e.target.value)},required:!0}),(0,n.jsx)("button",{type:"button",className:"password-toggle",onClick:function(){return L(!F)},children:""})]})]}),S&&(0,n.jsxs)("div",{className:"error-message",children:[" ",S]}),y&&(0,n.jsx)("div",{className:"success-message",children:y}),(0,n.jsx)("button",{type:"submit",className:"submit-btn",disabled:P,children:P?" Resetting...":" Reset Password"}),(0,n.jsx)("button",{type:"button",onClick:function(){return o(1)},className:"back-btn",style:{marginTop:"10px"},children:" Back"})]}),3===c&&(0,n.jsxs)("div",{className:"success-screen",children:[(0,n.jsx)("div",{style:{fontSize:"48px",marginBottom:"20px"},children:"\u2705"}),(0,n.jsx)("h3",{children:"Password Reset Successfully!"}),(0,n.jsx)("p",{children:"You can now login with your new password."})]})]})})}var P=a(797),I=a(3454);function E(){var e=(0,i.useState)([]),s=e[0],a=e[1],c=(0,i.useState)(!1),o=c[0],l=c[1],d=function(){var e=(0,t.Z)((function(){var e,s,t,n,i,c,o,d,u,m,f,p;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:l(!0),e=[],r.label=1;case 1:return r.trys.push([1,7,,8]),e.push({test:"System Health Check",status:"testing",message:"Checking overall system health..."}),a((0,P.Z)(e)),[4,fetch("/api/health",{method:"GET",headers:{Accept:"application/json"}})];case 2:return(s=r.sent()).ok?[4,s.json()]:[3,4];case 3:return t=r.sent(),e[e.length-1]={test:"System Health Check",status:"healthy"===t.status?"success":"warning",message:"".concat("healthy"===t.status?"\u2705":"\u26a0\ufe0f"," System Status: ").concat(t.status,"\nFrontend: ").concat(t.frontend.status,"\nBackend: ").concat(t.backend.status," (").concat(t.backend.responseTime,"ms)\nBackend URL: ").concat(t.backend.url,"\n").concat(t.backend.error?"Error: ".concat(t.backend.error):"")},[3,6];case 4:return[4,s.json()];case 5:i=r.sent(),e[e.length-1]={test:"System Health Check",status:"error",message:"\u274c Health check failed: ".concat(s.status," ").concat(s.statusText,"\n").concat((null===(n=i.backend)||void 0===n?void 0:n.error)||"Unknown error")},r.label=6;case 6:return[3,8];case 7:return c=r.sent(),e[e.length-1]={test:"System Health Check",status:"error",message:"\u274c Health check error: ".concat(c.message)},[3,8];case 8:a((0,P.Z)(e)),r.label=9;case 9:return r.trys.push([9,11,,12]),e.push({test:"Primary API Endpoint",status:"testing",message:"Testing /api/trial-status..."}),a((0,P.Z)(e)),[4,fetch("/api/trial-status?email=test@example.com",{method:"GET",headers:{Accept:"application/json"}})];case 10:return(o=r.sent()).ok?e[e.length-1]={test:"Primary API Endpoint",status:"success",message:"\u2705 API endpoint reachable (Status: ".concat(o.status,")")}:e[e.length-1]={test:"Primary API Endpoint",status:"warning",message:"\u26a0\ufe0f API endpoint returned ".concat(o.status,": ").concat(o.statusText)},[3,12];case 11:return d=r.sent(),e[e.length-1]={test:"Primary API Endpoint",status:"error",message:"\u274c Cannot reach API: ".concat(d.message)},[3,12];case 12:a((0,P.Z)(e)),u=I.env.NEXT_PUBLIC_BACKEND||"https://teachwise-mvp.vercel.app",r.label=13;case 13:return r.trys.push([13,15,,16]),e.push({test:"Backend Environment",status:"testing",message:"Testing API connectivity..."}),a((0,P.Z)(e)),[4,fetch("/api/trial-status?email=diagnostic-test@example.com",{method:"GET",headers:{Accept:"application/json"}})];case 14:return(m=r.sent()).ok||400===m.status?e[e.length-1]={test:"Backend Environment",status:"success",message:"\u2705 API endpoints accessible (Status: ".concat(m.status,")")}:e[e.length-1]={test:"Backend Environment",status:"warning",message:"\u26a0\ufe0f Backend returned ".concat(m.status,": ").concat(m.statusText)},[3,16];case 15:return f=r.sent(),e[e.length-1]={test:"Backend Environment",status:"error",message:"\u274c Cannot reach backend: ".concat(f.message)},[3,16];case 16:a((0,P.Z)(e)),r.label=17;case 17:return r.trys.push([17,19,,20]),e.push({test:"CORS Check",status:"testing",message:"Checking CORS configuration..."}),a((0,P.Z)(e)),[4,fetch("/api/trial-status",{method:"HEAD"})];case 18:return r.sent(),e[e.length-1]={test:"CORS Check",status:"success",message:"\u2705 CORS appears to be configured correctly"},[3,20];case 19:return(p=r.sent()).message.includes("CORS")?e[e.length-1]={test:"CORS Check",status:"error",message:"\u274c CORS Error: ".concat(p.message)}:e[e.length-1]={test:"CORS Check",status:"info",message:"\u2139\ufe0f CORS check inconclusive: ".concat(p.message)},[3,20];case 20:return a((0,P.Z)(e)),e.push({test:"Environment Info",status:"info",message:"\n        Environment: ".concat("production","\n        Backend URL: ").concat(u,"\n        Current URL: ").concat(window.location.origin,"\n        User Agent: ").concat(navigator.userAgent.substring(0,50),"...\n      ")}),a((0,P.Z)(e)),l(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),u=function(e){switch(e){case"success":return"#10B981";case"warning":return"#F59E0B";case"error":return"#EF4444";case"testing":return"#3B82F6";default:return"#6B7280"}};return(0,n.jsxs)("div",{style:{padding:"20px",backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"8px",margin:"20px",fontFamily:"monospace"},children:[(0,n.jsx)("h3",{children:"\ud83d\udd27 Connection Diagnostics"}),(0,n.jsx)("p",{children:"This tool helps diagnose connection issues between the frontend and backend."}),(0,n.jsx)("button",{onClick:d,disabled:o,style:{padding:"10px 20px",backgroundColor:o?"#9CA3AF":"#3B82F6",color:"white",border:"none",borderRadius:"6px",cursor:o?"not-allowed":"pointer",marginBottom:"20px"},children:o?"\ud83d\udd04 Running Diagnostics...":"\ud83d\ude80 Run Diagnostics"}),s.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{children:"\ud83d\udcca Diagnostic Results:"}),s.map((function(e,s){return(0,n.jsxs)("div",{style:{padding:"10px",margin:"5px 0",backgroundColor:"white",border:"2px solid ".concat(u(e.status)),borderRadius:"6px"},children:[(0,n.jsxs)("strong",{style:{color:u(e.status)},children:[e.test,":"]}),(0,n.jsx)("pre",{style:{margin:"5px 0 0 0",fontSize:"12px",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:e.message})]},s)}))]}),(0,n.jsxs)("div",{style:{marginTop:"20px",fontSize:"12px",color:"#6B7280"},children:[(0,n.jsx)("strong",{children:"\ud83d\udca1 Troubleshooting Tips:"}),(0,n.jsxs)("ul",{style:{marginTop:"10px",paddingLeft:"20px"},children:[(0,n.jsx)("li",{children:"If primary API fails: Check if backend server is running"}),(0,n.jsx)("li",{children:"If backend environment fails: Verify environment variables"}),(0,n.jsx)("li",{children:"If CORS errors: Check CORS configuration in backend"}),(0,n.jsx)("li",{children:"Try refreshing the page or clearing browser cache"})]})]})]})}var _=a(3454);function T(e){var s=e.children,a=(0,j.useRouter)(),c=(0,i.useState)(null),o=c[0],l=c[1],d=(0,i.useState)(null),u=d[0],m=d[1],f=(0,i.useState)(!1),p=(f[0],f[1],(0,i.useState)(!1)),b=p[0],h=p[1],x=(0,i.useState)(!1),g=x[0],w=x[1],v=(0,i.useState)(!0),k=v[0],N=v[1],S=(0,i.useState)(""),P=S[0],I=S[1],T=(0,i.useState)(!1),L=T[0],O=T[1],R=(0,i.useState)(null),Z=(R[0],R[1]),B=(0,i.useState)(!1),D=B[0],U=B[1],J=(0,i.useState)(0),Y=J[0],G=J[1],X=function(){var e=(0,t.Z)((function(e){var s,t,n,i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:r.trys.push([0,7,,8]),I(""),r.label=1;case 1:return r.trys.push([1,3,,5]),[4,fetch("/api/trial-status?email=".concat(encodeURIComponent(e)),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},signal:AbortSignal.timeout(1e4)})];case 2:return s=r.sent(),[3,5];case 3:return t=r.sent(),console.warn("Primary API endpoint failed, trying fallback...",t),[4,fetch("".concat(_.env.NEXT_PUBLIC_BACKEND||_.env.NEXT_PUBLIC_BACKEND_URL||"https://teachwise-8lpxy8ra-krishnamathi2s-projects.vercel.app","/trial-status?email=").concat(encodeURIComponent(e)),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}})];case 4:return s=r.sent(),[3,5];case 5:if(!s.ok)throw new Error("HTTP ".concat(s.status,": ").concat(s.statusText));return[4,s.json()];case 6:return n=r.sent(),m(n),n.trialExpired&&!n.isSubscribed&&(Z(e),localStorage.removeItem("teachwise_user"),l(null),m(null),a.push("/pricing"),console.log("Trial expired after 20 minutes - user automatically logged out and redirected to pricing")),[3,8];case 7:return i=r.sent(),console.error("Error checking trial status:",i),"TimeoutError"===i.name||i.message.includes("timeout")?I("Request timeout. The server might be slow. Please try again."):i.message.includes("Failed to fetch")||i.message.includes("NetworkError")?I("Network connection issue. Please check your internet connection and try again."):i.message.includes("500")?I("Server error. Our team has been notified. Please try again in a few minutes."):i.message.includes("404")?I("Service temporarily unavailable. Please try again later."):I("Unable to check trial status. Please refresh the page or try again later."),Y<2&&(i.message.includes("Failed to fetch")||i.message.includes("NetworkError")||"TimeoutError"===i.name)&&(console.log("Auto-retrying... Attempt ".concat(Y+1,"/3")),G(Y+1),setTimeout((function(){X(e)}),2e3*(Y+1))),[3,8];case 8:return[2]}}))}));return function(s){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){var e=function(){var e=(0,t.Z)((function(){var e,s,a;return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,4,5]),(e=localStorage.getItem("teachwise_user"))?(s=JSON.parse(e),l(s),[4,X(s.email)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return a=t.sent(),console.error("Error loading user session:",a),localStorage.removeItem("teachwise_user"),I("Session data corrupted. Please sign in again."),[3,5];case 4:return N(!1),[7];case 5:return[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,i.useEffect)((function(){if(o&&u&&!u.isSubscribed){var e=setInterval((0,t.Z)((function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,X(o.email)];case 1:return e.sent(),[2]}}))})),3e4),s=function(){var e=(0,t.Z)((function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return console.log("Payment success detected, refreshing trial status..."),[4,X(o.email)];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}();return window.addEventListener("payment-success",s),function(){clearInterval(e),window.removeEventListener("payment-success",s)}}}),[o,u]),(0,i.useEffect)((function(){var e=function(){w(!0)};return window.addEventListener("open-forgot-password",e),function(){return window.removeEventListener("open-forgot-password",e)}}),[]);return k?(0,n.jsx)("div",{className:"auth-center",children:(0,n.jsxs)("div",{className:"loading-container",children:[(0,n.jsx)("div",{className:"loading-spinner-large"}),(0,n.jsx)("p",{className:"loading-text",children:"Initializing TeachWise..."}),(0,n.jsxs)("div",{className:"loading-steps",children:[(0,n.jsx)("div",{className:"step active",children:"Checking session"}),(0,n.jsx)("div",{className:"step",children:"Loading preferences"}),(0,n.jsx)("div",{className:"step",children:"Verifying trial status"})]})]})}):P?(0,n.jsx)("div",{className:"auth-center",children:(0,n.jsxs)("div",{className:"error-container",children:[(0,n.jsx)("div",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,n.jsx)("h3",{children:"Connection Issue"}),(0,n.jsx)("p",{children:P}),(0,n.jsxs)("div",{className:"error-actions",children:[(0,n.jsx)("button",{onClick:function(){I(""),G(0),N(!0);var e=localStorage.getItem("teachwise_user");if(e)try{var s=JSON.parse(e);l(s),X(s.email)}catch(a){console.error("Error retrying:",a),I("Failed to retry. Please refresh the page.")}N(!1)},className:"retry-button",children:"\ud83d\udd04 Retry Connection"}),(0,n.jsx)("button",{onClick:function(){return window.location.reload()},className:"retry-button",style:{marginLeft:"10px"},children:"\ud83d\udd04 Refresh Page"}),(0,n.jsx)("button",{onClick:function(){return U(!D)},className:"diagnostic-button",style:{marginLeft:"10px",backgroundColor:D?"#EF4444":"#6B7280",color:"white",border:"none",padding:"10px 16px",borderRadius:"6px",cursor:"pointer"},children:D?"\ud83d\udd27 Hide Diagnostics":"\ud83d\udd0d Show Diagnostics"})]}),Y>0&&(0,n.jsxs)("p",{style:{fontSize:"14px",color:"#6B7280",marginTop:"10px"},children:["Auto-retry attempts: ",Y,"/3"]}),D&&(0,n.jsx)(E,{})]})}):o?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"auth-header",children:[(0,n.jsxs)("div",{className:"user-info",children:[(0,n.jsx)("span",{className:"user-badge",children:o.email}),u&&(0,n.jsx)("span",{className:"trial-info ".concat(A(u)),children:u.isSubscribed?(0,n.jsxs)("span",{className:"subscription-status",children:[(0,n.jsx)("span",{className:"status-icon",children:"\u2705"}),"Subscribed (\u20b9",u.paidAmount,")"]}):(0,n.jsxs)("span",{className:"trial-status",children:[(0,n.jsx)("span",{className:"status-icon",children:"\u26a1"}),u.creditsLeft>0?(0,n.jsxs)(n.Fragment,{children:[u.creditsLeft," credits",u.minutesLeft>0&&(0,n.jsxs)("span",{className:"time-remaining",children:[" \u2022 ",u.minutesLeft," min left"]}),u.creditsLeft<=12&&(0,n.jsx)("span",{className:"urgent-indicator",children:" \u2022 Running low!"})]}):(0,n.jsx)("span",{className:"add-credits-message",children:"Add Credits to Continue"})]})})]}),(0,n.jsx)("div",{className:"header-actions",children:(0,n.jsxs)("button",{onClick:function(){localStorage.removeItem("teachwise_user"),l(null),m(null),Z(null),I(""),G(0)},className:"signout-btn",children:[(0,n.jsx)("span",{className:"btn-icon",children:"\ud83d\udc4b"}),"Sign out"]})})]}),(0,n.jsx)(y,{onPurchaseClick:function(){return h(!0)},onLowCredits:function(e){return O(e<=5)}}),L&&(0,n.jsxs)("div",{className:"low-credits-banner",children:[(0,n.jsx)("span",{className:"warning-icon",children:"\u26a1"}),(0,n.jsx)("span",{className:"warning-text",children:"Running low on credits! Get more to continue using AI tools."}),(0,n.jsx)("button",{className:"get-credits-btn",onClick:function(){return h(!0)},children:"Get Credits"})]}),s,(0,n.jsx)(C,{isOpen:b,onClose:function(){return h(!1)},onPurchaseSuccess:function(){h(!1),O(!1)}}),g&&(0,n.jsx)(z,{onClose:function(){return w(!1)}})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(F,{onSignIn:l,onTrialCheck:X,hiddenByForgotPassword:g}),g&&(0,n.jsx)(z,{onClose:function(){return w(!1)}})]})}function A(e){return e.isSubscribed?"subscribed":0===e.creditsLeft?"trial-critical":e.creditsLeft<=12?"trial-warning":"trial-active"}function F(e){var s=e.onSignIn,a=e.onTrialCheck,c=e.hiddenByForgotPassword,o=(0,i.useState)(!1),l=o[0],d=o[1],u=(0,i.useState)(""),m=u[0],f=(u[1],(0,i.useState)("")),p=f[0],b=(f[1],(0,i.useState)("")),h=b[0],x=(b[1],(0,i.useState)(!1)),g=x[0],j=(x[1],(0,i.useState)("")),w=(j[0],j[1]),v=(0,i.useState)(!1),y=(v[0],v[1]),k=(0,i.useState)(!1),N=(k[0],k[1],(0,i.useState)(!1)),S=(N[0],N[1],(0,i.useState)({})),C=(S[0],S[1]),z=(0,i.useState)({}),P=z[0],I=z[1],E=function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},_=function(e){var s=[];return e.length<8&&s.push("At least 8 characters"),/(?=.*[a-z])/.test(e)||s.push("One lowercase letter"),/(?=.*[A-Z])/.test(e)||s.push("One uppercase letter"),/(?=.*\d)/.test(e)||s.push("One number"),/(?=.*[@$!%*?&])/.test(e)||s.push("One special character"),s};(0,i.useEffect)((function(){var e={};if(P.email&&m&&(E(m.trim())||(e.email="Please enter a valid email address")),P.password&&p)if(g){var s=_(p);s.length>0&&(e.password=s.join(", "))}else p.length<6&&(e.password="Password must be at least 6 characters");P.confirmPassword&&g&&h&&p!==h&&(e.confirmPassword="Passwords do not match"),C(e)}),[m,p,h,g,P]);(function(){var e=(0,t.Z)((function(e){var t,n,i,c,o;return(0,r.__generator)(this,(function(r){if(e.preventDefault(),w(""),I({email:!0,password:!0,confirmPassword:g}),!m.trim())return w("Email is required"),[2];if(!E(m.trim()))return w("Please enter a valid email address"),[2];if(!p.trim())return w("Password is required"),[2];if(g){if((t=_(p)).length>0)return w("Password requirements: ".concat(t.join(", "))),[2];if(!h.trim())return w("Please confirm your password"),[2];if(p!==h)return w("Passwords do not match"),[2]}else if(p.length<6)return w("Password must be at least 6 characters"),[2];y(!0);try{if(n={email:m.trim().toLowerCase()},g){if((i=JSON.parse(localStorage.getItem("teachwise_users")||"{}"))[n.email])return w("An account with this email already exists. Please sign in instead."),y(!1),[2];i[n.email]={email:n.email,createdAt:(new Date).toISOString(),password:p},localStorage.setItem("teachwise_users",JSON.stringify(i)),w("\ud83c\udf89 Account created successfully! Welcome to TeachWise!"),setTimeout((function(){localStorage.setItem("teachwise_user",JSON.stringify(n)),s(n),a(n.email)}),1500)}else{if(c=JSON.parse(localStorage.getItem("teachwise_users")||"{}"),!(o=c[n.email]))return w("No account found with this email. Please sign up first."),y(!1),[2];if(o.password!==p)return w("Incorrect password. Please try again."),y(!1),[2];w("\u2705 Welcome back! Signing you in..."),setTimeout((function(){localStorage.setItem("teachwise_user",JSON.stringify(n)),s(n),a(n.email)}),1e3)}}catch(l){w("\u274c An unexpected error occurred. Please try again."),console.error("Auth error:",l),y(!1)}return[2]}))}))})(),g&&function(e){var s=[e.length>=8,/(?=.*[a-z])/.test(e),/(?=.*[A-Z])/.test(e),/(?=.*\d)/.test(e),/(?=.*[@$!%*?&])/.test(e)].filter(Boolean).length}(p);return(0,n.jsxs)("div",{className:"auth-center",children:[(0,n.jsx)("div",{className:"hero-section",children:(0,n.jsxs)("div",{className:"hero-content",children:[(0,n.jsx)("div",{className:"hero-icon",children:"\ud83c\udf93"}),(0,n.jsx)("h1",{className:"hero-title",children:"Introducing TeachWise AI"}),(0,n.jsx)("p",{className:"hero-subtitle",children:"The intelligent teaching assistant that transforms how educators create lesson plans, quizzes, and presentations."}),(0,n.jsxs)("div",{className:"hero-features",children:[(0,n.jsxs)("div",{className:"feature-item",children:[(0,n.jsx)("span",{className:"feature-icon",children:"\u26a1"}),(0,n.jsx)("span",{children:"Generate content in seconds"})]}),(0,n.jsxs)("div",{className:"feature-item",children:[(0,n.jsx)("span",{className:"feature-icon",children:"\ud83c\udfaf"}),(0,n.jsx)("span",{children:"Personalized for your grade level"})]}),(0,n.jsxs)("div",{className:"feature-item",children:[(0,n.jsx)("span",{className:"feature-icon",children:"\ud83d\udcca"}),(0,n.jsx)("span",{children:"Export to PDF & PowerPoint"})]})]}),(0,n.jsx)("button",{className:"hero-cta-button",onClick:function(){return d(!0)},children:"Get Started"}),(0,n.jsx)("p",{className:"trial-notice",children:"\u2728 100 credits trial - valid for 20 minutes \u2022 No credit card required"})]})}),l&&!c&&(0,n.jsx)(L,{onClose:function(){return d(!1)},onSignIn:s,onTrialCheck:a})]})}function L(e){var s=e.onClose,a=e.onSignIn,c=e.onTrialCheck,o=(0,i.useState)(""),u=o[0],m=o[1],f=(0,i.useState)(""),p=f[0],b=f[1],h=(0,i.useState)(""),x=h[0],j=h[1],w=(0,i.useState)(!1),v=w[0],y=w[1],k=(0,i.useState)(""),N=k[0],S=k[1],C=(0,i.useState)(!1),z=C[0],P=C[1],I=(0,i.useState)(!1),E=I[0],_=I[1],T=(0,i.useState)(!1),A=T[0],F=T[1],L=(0,i.useState)({}),O=L[0],R=L[1],Z=(0,i.useState)({}),B=Z[0],D=Z[1],U=function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},J=function(e){var s=[];return e.length<8&&s.push("At least 8 characters"),/(?=.*[a-z])/.test(e)||s.push("One lowercase letter"),/(?=.*[A-Z])/.test(e)||s.push("One uppercase letter"),/(?=.*\d)/.test(e)||s.push("One number"),/(?=.*[@$!%*?&])/.test(e)||s.push("One special character"),s};(0,i.useEffect)((function(){var e={};if(B.email&&u&&(U(u.trim())||(e.email="Please enter a valid email address")),B.password&&p)if(v){var s=J(p);s.length>0&&(e.password=s.join(", "))}else p.length<6&&(e.password="Password must be at least 6 characters");B.confirmPassword&&v&&x&&p!==x&&(e.confirmPassword="Passwords do not match"),R(e)}),[u,p,x,v,B]);var Y=function(e){D((function(s){return(0,d.Z)((0,l.Z)({},s),(0,g.Z)({},e,!0))}))},G=function(){var e=(0,t.Z)((function(e){var t,n,i,o,l;return(0,r.__generator)(this,(function(r){if(e.preventDefault(),S(""),D({email:!0,password:!0,confirmPassword:v}),!u.trim())return S("Email is required"),[2];if(!U(u.trim()))return S("Please enter a valid email address"),[2];if(!p.trim())return S("Password is required"),[2];if(v){if((t=J(p)).length>0)return S("Password requirements: ".concat(t.join(", "))),[2];if(!x.trim())return S("Please confirm your password"),[2];if(p!==x)return S("Passwords do not match"),[2]}else if(p.length<6)return S("Password must be at least 6 characters"),[2];P(!0);try{if(n={email:u.trim().toLowerCase()},v){if((i=JSON.parse(localStorage.getItem("teachwise_users")||"{}"))[n.email])return S("An account with this email already exists. Please sign in instead."),P(!1),[2];i[n.email]={email:n.email,createdAt:(new Date).toISOString(),password:p},localStorage.setItem("teachwise_users",JSON.stringify(i)),S("\ud83c\udf89 Account created successfully! Welcome to TeachWise!"),setTimeout((function(){localStorage.setItem("teachwise_user",JSON.stringify(n)),a(n),c(n.email),s()}),1500)}else{if(o=JSON.parse(localStorage.getItem("teachwise_users")||"{}"),!(l=o[n.email]))return S("No account found with this email. Please sign up first."),P(!1),[2];if(l.password!==p)return S("Incorrect password. Please try again."),P(!1),[2];S("\u2705 Welcome back! Signing you in..."),setTimeout((function(){localStorage.setItem("teachwise_user",JSON.stringify(n)),a(n),c(n.email),s()}),1e3)}}catch(d){S("\u274c An unexpected error occurred. Please try again."),console.error("Auth error:",d),P(!1)}return[2]}))}));return function(s){return e.apply(this,arguments)}}(),X=v?function(e){var s=[e.length>=8,/(?=.*[a-z])/.test(e),/(?=.*[A-Z])/.test(e),/(?=.*\d)/.test(e),/(?=.*[@$!%*?&])/.test(e)].filter(Boolean).length;return 0===s?{label:"",color:"",width:"0%"}:s<=2?{label:"Weak",color:"#e53e3e",width:"33%"}:s<=4?{label:"Good",color:"#dd6b20",width:"66%"}:{label:"Strong",color:"#38a169",width:"100%"}}(p):null;return(0,n.jsx)("div",{className:"auth-modal-overlay",onClick:s,children:(0,n.jsxs)("div",{className:"auth-modal",onClick:function(e){return e.stopPropagation()},children:[(0,n.jsxs)("div",{className:"modal-header",children:[(0,n.jsx)("h2",{children:v?"Create Your Account":"Welcome Back"}),(0,n.jsx)("button",{className:"modal-close",onClick:s,children:"\xd7"})]}),(0,n.jsxs)("form",{onSubmit:G,className:"auth-form",children:[(0,n.jsxs)("div",{className:"form-field",children:[(0,n.jsx)("label",{htmlFor:"email",children:"Email Address"}),(0,n.jsxs)("div",{className:"input-container",children:[(0,n.jsx)("input",{id:"email",type:"email",placeholder:"Enter your email address",value:u,onChange:function(e){return m(e.target.value)},onBlur:function(){return Y("email")},required:!0,className:O.email?"error":B.email&&!O.email?"success":""}),B.email&&!O.email&&u&&(0,n.jsx)("span",{className:"input-success-icon",children:"\u2713"})]}),O.email&&(0,n.jsx)("span",{className:"field-error",children:O.email})]}),(0,n.jsxs)("div",{className:"form-field",children:[(0,n.jsx)("label",{htmlFor:"password",children:"Password"}),(0,n.jsxs)("div",{className:"password-input-container",children:[(0,n.jsx)("input",{id:"password",type:E?"text":"password",placeholder:v?"Create a strong password":"Enter your password",value:p,onChange:function(e){return b(e.target.value)},onBlur:function(){return Y("password")},required:!0,className:O.password?"error":B.password&&!O.password&&p?"success":""}),(0,n.jsx)("button",{type:"button",className:"password-toggle",onClick:function(){return _(!E)},"aria-label":E?"Hide password":"Show password",children:E?"\ud83d\udc41\ufe0f":"\ud83d\ude48"})]}),v&&p&&(0,n.jsxs)("div",{className:"password-strength",children:[(0,n.jsx)("div",{className:"strength-bar",children:(0,n.jsx)("div",{className:"strength-fill",style:{width:X.width,backgroundColor:X.color}})}),(0,n.jsx)("span",{className:"strength-label",style:{color:X.color},children:X.label})]}),O.password&&(0,n.jsx)("span",{className:"field-error",children:O.password})]}),v&&(0,n.jsxs)("div",{className:"form-field",children:[(0,n.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),(0,n.jsxs)("div",{className:"password-input-container",children:[(0,n.jsx)("input",{id:"confirmPassword",type:A?"text":"password",placeholder:"Confirm your password",value:x,onChange:function(e){return j(e.target.value)},onBlur:function(){return Y("confirmPassword")},required:!0,className:O.confirmPassword?"error":B.confirmPassword&&!O.confirmPassword&&x?"success":""}),(0,n.jsx)("button",{type:"button",className:"password-toggle",onClick:function(){return F(!A)},"aria-label":A?"Hide confirm password":"Show confirm password",children:A?"\ud83d\udc41\ufe0f":"\ud83d\ude48"})]}),O.confirmPassword&&(0,n.jsx)("span",{className:"field-error",children:O.confirmPassword})]}),(0,n.jsx)("button",{type:"submit",className:"auth-submit-btn",disabled:z||Object.keys(O).length>0,children:z?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"loading-spinner-small"}),v?"Creating Account...":"Signing In..."]}):(0,n.jsx)(n.Fragment,{children:v?"Start Trial":"Sign In"})})]}),N&&(0,n.jsx)("div",{className:"auth-message ".concat(N.includes("\ud83c\udf89")||N.includes("\u2705")?"success":N.includes("\u274c")?"error":"info"),children:N}),(0,n.jsxs)("div",{className:"auth-toggle",children:[(0,n.jsxs)("p",{children:[v?"Already have an account?":"Don't have an account?"," ",(0,n.jsx)("button",{type:"button",onClick:function(){y(!v),S(""),R({}),D({}),j(""),_(!1),F(!1)},className:"toggle-auth-btn",children:v?"Sign In":"Sign Up"})]}),!v&&(0,n.jsx)("p",{style:{marginTop:"10px"},children:(0,n.jsx)("button",{type:"button",onClick:function(){return window.dispatchEvent(new Event("open-forgot-password"))},className:"forgot-password-btn",style:{background:"none",border:"none",color:"#4F46E5",textDecoration:"underline",cursor:"pointer",fontSize:"14px",padding:0},children:"Forgot Password?"})})]})]})})}function O(){var e=(0,i.useState)((function(){try{return localStorage.getItem("theme")||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}catch(e){return"light"}})),s=e[0],a=e[1];return(0,i.useEffect)((function(){document.documentElement.setAttribute("data-theme",s);try{localStorage.setItem("theme",s)}catch(e){}}),[s]),(0,n.jsx)("button",{className:"theme-toggle",onClick:function(){return a((function(e){return"dark"===e?"light":"dark"}))},"aria-label":"Toggle dark mode",children:"dark"===s?"\ud83c\udf19 Dark":"\u2600\ufe0f Light"})}function R(){var e=(0,i.useState)(null),s=e[0],a=e[1],c=(0,i.useState)(!1),l=c[0],d=c[1];(0,i.useEffect)((function(){var e=function(e){e.preventDefault(),a(e),d(!0)};return window.addEventListener("beforeinstallprompt",e),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then((function(e){console.log("SW registered: ",e)})).catch((function(e){console.log("SW registration failed: ",e)})),function(){window.removeEventListener("beforeinstallprompt",e)}}),[]);var u=function(){var e=(0,t.Z)((function(){var e;return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return s?(s.prompt(),[4,s.userChoice]):[3,2];case 1:e=t.sent().outcome,console.log("User response to install prompt: ".concat(e)),a(null),d(!1),t.label=2;case 2:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(o(),{children:[(0,n.jsx)("title",{children:"TeachWise AI - Teaching Assistant App"}),(0,n.jsx)("meta",{name:"description",content:"AI-powered mobile app for creating lesson plans, quizzes, and presentations"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"}),(0,n.jsx)("meta",{name:"theme-color",content:"#3b9bff"}),(0,n.jsx)("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),(0,n.jsx)("meta",{name:"apple-mobile-web-app-status-bar-style",content:"default"}),(0,n.jsx)("meta",{name:"apple-mobile-web-app-title",content:"TeachWise AI"}),(0,n.jsx)("link",{rel:"manifest",href:"/manifest.json"}),(0,n.jsx)("link",{rel:"apple-touch-icon",href:"/icons/icon-192x192.png"}),(0,n.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/icons/icon-32x32.png"}),(0,n.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/icons/icon-16x16.png"})]}),(0,n.jsx)(T,{children:(0,n.jsxs)("div",{className:"app-container",children:[l&&(0,n.jsx)("div",{className:"install-prompt",children:(0,n.jsxs)("div",{className:"install-prompt-content",children:[(0,n.jsx)("span",{className:"install-icon",children:"\ud83d\udcf1"}),(0,n.jsxs)("div",{className:"install-text",children:[(0,n.jsx)("h4",{children:"Install TeachWise App"}),(0,n.jsx)("p",{children:"Add to your home screen for the best experience"})]}),(0,n.jsx)("button",{onClick:u,className:"install-btn",children:"Install"}),(0,n.jsx)("button",{onClick:function(){return d(!1)},className:"install-close",children:"\xd7"})]})}),(0,n.jsxs)("main",{className:"main-container",children:[(0,n.jsxs)("header",{className:"header",children:[(0,n.jsxs)("div",{className:"header-content",children:[(0,n.jsx)("h1",{children:"TeachWise.ai"}),(0,n.jsx)("p",{children:"Create engaging lesson plans and quizzes in seconds with AI"})]}),(0,n.jsx)(O,{})]}),(0,n.jsx)(x,{}),(0,n.jsx)("footer",{className:"footer",children:(0,n.jsx)("p",{children:"\u2728 Powered by OpenAI \u2022 Built with Next.js"})})]})]})})]})}}},function(e){e.O(0,[357,524,635,774,888,179],(function(){return s=5557,e(e.s=s);var s}));var s=e.O();_N_E=s}]);