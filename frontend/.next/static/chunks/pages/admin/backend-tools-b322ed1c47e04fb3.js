(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[395],{5426:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/backend-tools",function(){return n(9308)}])},9308:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var r=n(7568),i=n(6042),s=n(9396),o=n(7582),d=n(5893),a=n(7294);function l(){var e=(0,a.useState)(""),t=e[0],n=e[1],l=(0,a.useState)(""),c=l[0],u=l[1],p=(0,a.useState)(""),h=p[0],g=p[1],x=(0,a.useState)([]),f=x[0],b=x[1],y=(0,a.useState)([]),m=y[0],j=y[1],v=(0,a.useState)([]),S=v[0],A=v[1],w=(0,a.useState)(""),k=w[0],_=w[1],O=(0,a.useState)(!1),R=O[0],T=O[1],B=(0,a.useState)(!1),C=B[0],P=B[1],E=(0,a.useState)({transactionId:"",email:"",amount:"",planType:""}),W=E[0],N=E[1],Z=(0,a.useState)(null),z=Z[0],L=Z[1],I=(0,a.useState)({email:"",credits:"",paidAmount:"",action:"add"}),J=I[0],U=I[1],D=(0,a.useState)([]),H=D[0],M=D[1],G=(0,a.useState)(!1),F=G[0],V=G[1];(0,a.useEffect)((function(){t&&0===S.length&&se()}),[t]);var q=function(){return(0,i.Z)({"Content-Type":"application/json"},t?{Authorization:"Bearer ".concat(t)}:{})};function Q(){return(Q=(0,r.Z)((function(){var e,t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:T(!0),g(""),n.label=1;case 1:return n.trys.push([1,4,5,6]),[4,fetch("/api/admin/migration-sql",{headers:q()})];case 2:return[4,n.sent().json()];case 3:return(e=n.sent()).success?u(e.sql||""):g(JSON.stringify(e)),[3,6];case 4:return t=n.sent(),g(String(t)),[3,6];case 5:return T(!1),[7];case 6:return[2]}}))}))).apply(this,arguments)}function X(){return(X=(0,r.Z)((function(){var e,t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:T(!0),g(""),n.label=1;case 1:return n.trys.push([1,4,5,6]),[4,fetch("/api/admin/run-migration",{method:"POST",headers:q()})];case 2:return[4,n.sent().json()];case 3:return e=n.sent(),g(JSON.stringify(e,null,2)),[3,6];case 4:return t=n.sent(),g(String(t)),[3,6];case 5:return T(!1),[7];case 6:return[2]}}))}))).apply(this,arguments)}function Y(){return(Y=(0,r.Z)((function(){var e,t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:T(!0),g(""),n.label=1;case 1:return n.trys.push([1,4,5,6]),[4,fetch("/api/admin/reload-processed-transactions",{method:"POST",headers:q()})];case 2:return[4,n.sent().json()];case 3:return e=n.sent(),g(JSON.stringify(e,null,2)),[3,6];case 4:return t=n.sent(),g(String(t)),[3,6];case 5:return T(!1),[7];case 6:return[2]}}))}))).apply(this,arguments)}function K(){return(K=(0,r.Z)((function(){var e,t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:T(!0),g(""),n.label=1;case 1:return n.trys.push([1,4,5,6]),[4,fetch("/api/admin/processed-transactions",{headers:q()})];case 2:return[4,n.sent().json()];case 3:return(e=n.sent()).success?b(e.transactions||[]):g(JSON.stringify(e)),[3,6];case 4:return t=n.sent(),g(String(t)),[3,6];case 5:return T(!1),[7];case 6:return[2]}}))}))).apply(this,arguments)}function $(){return($=(0,r.Z)((function(e){var t,n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:e.preventDefault(),T(!0),g(""),r.label=1;case 1:return r.trys.push([1,4,5,6]),[4,fetch("/api/admin/add-processed-transaction",{method:"POST",headers:q(),body:JSON.stringify(W)})];case 2:return[4,r.sent().json()];case 3:return t=r.sent(),g(JSON.stringify(t,null,2)),[3,6];case 4:return n=r.sent(),g(String(n)),[3,6];case 5:return T(!1),[7];case 6:return[2]}}))}))).apply(this,arguments)}function ee(){return(ee=(0,r.Z)((function(){var e,t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:if(!confirm("\u26a0\ufe0f DANGER: This will delete ALL user signups from memory and database. Are you sure?"))return[2];T(!0),g(""),n.label=1;case 1:return n.trys.push([1,4,5,6]),[4,fetch("/api/admin/reset-signups",{method:"POST",headers:q()})];case 2:return[4,n.sent().json()];case 3:return e=n.sent(),g(JSON.stringify(e,null,2)),[3,6];case 4:return t=n.sent(),g(String(t)),[3,6];case 5:return T(!1),[7];case 6:return[2]}}))}))).apply(this,arguments)}function te(){return(te=(0,r.Z)((function(){var e,t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:if(!confirm("\u26a0\ufe0f DANGER: This will delete ALL user logins from memory and database. Are you sure?"))return[2];T(!0),g(""),n.label=1;case 1:return n.trys.push([1,4,5,6]),[4,fetch("/api/admin/reset-logins",{method:"POST",headers:q()})];case 2:return[4,n.sent().json()];case 3:return e=n.sent(),g(JSON.stringify(e,null,2)),[3,6];case 4:return t=n.sent(),g(String(t)),[3,6];case 5:return T(!1),[7];case 6:return[2]}}))}))).apply(this,arguments)}function ne(){return(ne=(0,r.Z)((function(){var e,t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:if(!confirm("\u26a0\ufe0f DANGER: This will delete ALL processed transactions from memory and database. Are you sure?"))return[2];T(!0),g(""),n.label=1;case 1:return n.trys.push([1,4,5,6]),[4,fetch("/api/admin/reset-transactions",{method:"POST",headers:q()})];case 2:return[4,n.sent().json()];case 3:return e=n.sent(),g(JSON.stringify(e,null,2)),[3,6];case 4:return t=n.sent(),g(String(t)),[3,6];case 5:return T(!1),[7];case 6:return[2]}}))}))).apply(this,arguments)}function re(){return(re=(0,r.Z)((function(){var e,t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:if(!confirm("\u26a0\ufe0f\u26a0\ufe0f EXTREME DANGER: This will delete ALL data (signups, logins, transactions) from memory and database. Are you ABSOLUTELY sure?"))return[2];T(!0),g(""),n.label=1;case 1:return n.trys.push([1,4,5,6]),[4,fetch("/api/admin/reset-all",{method:"POST",headers:q()})];case 2:return[4,n.sent().json()];case 3:return e=n.sent(),g(JSON.stringify(e,null,2)),[3,6];case 4:return t=n.sent(),g(String(t)),[3,6];case 5:return T(!1),[7];case 6:return[2]}}))}))).apply(this,arguments)}function ie(){return(ie=(0,r.Z)((function(){var e,t,n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:T(!0),g(""),r.label=1;case 1:return r.trys.push([1,4,5,6]),e="/api/admin/user-logins?limit=100".concat(k?"&email=".concat(encodeURIComponent(k)):""),[4,fetch(e,{headers:q()})];case 2:return[4,r.sent().json()];case 3:return(t=r.sent()).success?j(t.logins||[]):g(JSON.stringify(t)),[3,6];case 4:return n=r.sent(),g(String(n)),[3,6];case 5:return T(!1),[7];case 6:return[2]}}))}))).apply(this,arguments)}function se(){return oe.apply(this,arguments)}function oe(){return(oe=(0,r.Z)((function(){var e,t,n,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:P(!0),g(""),i.label=1;case 1:return i.trys.push([1,4,5,6]),[4,fetch("/api/admin/users?limit=100",{headers:q()})];case 2:return[4,i.sent().json()];case 3:return e=i.sent(),t=e.users||[],!0===e.success||void 0!==e.totalUsers||t.length>0?(n=t.map((function(e){return{email:e.email,registeredAt:e.registeredAt,credits:e.credits||0,paidAmount:e.paidAmount||e.paid_amount||0,isSubscribed:(e.paidAmount||e.paid_amount||0)>0||e.isPaidUser||!1,trialUsed:e.trialUsed||e.trial_used||!1,ipAddress:e.ipAddress||e.ip_address||null}})),A(n),0===n.length&&g("No users found in database. Users will appear here after they sign up.")):g(JSON.stringify(e)),[3,6];case 4:return r=i.sent(),g("Error loading users: "+String(r)),console.error("Error loading users:",r),[3,6];case 5:return P(!1),[7];case 6:return[2]}}))}))).apply(this,arguments)}function de(){return(de=(0,r.Z)((function(e){var t,n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:e.preventDefault(),T(!0),g(""),r.label=1;case 1:return r.trys.push([1,7,8,9]),[4,fetch("/api/admin/update-credits",{method:"POST",headers:q(),body:JSON.stringify({email:J.email,credits:J.credits?parseInt(J.credits):void 0,paidAmount:J.paidAmount?parseInt(J.paidAmount):void 0,action:J.action})})];case 2:return[4,r.sent().json()];case 3:return(t=r.sent()).success?(g("\u2705 Credits updated successfully!\n\n".concat(JSON.stringify(t.user,null,2))),[4,se()]):[3,5];case 4:return r.sent(),U({email:"",credits:"",paidAmount:"",action:"add"}),L(null),[3,6];case 5:g("\u274c Error: ".concat(t.error,"\n\n").concat(JSON.stringify(t,null,2))),r.label=6;case 6:return[3,9];case 7:return n=r.sent(),g("\u274c Error: ".concat(String(n))),[3,9];case 8:return T(!1),[7];case 9:return[2]}}))}))).apply(this,arguments)}function ae(){return le.apply(this,arguments)}function le(){return(le=(0,r.Z)((function(){var e,t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:V(!0),g(""),n.label=1;case 1:return n.trys.push([1,4,5,6]),[4,fetch("/api/admin/pending-payments",{headers:q()})];case 2:return[4,n.sent().json()];case 3:return(e=n.sent()).success?(M(e.pendingPayments||[]),g("Loaded ".concat(e.totalPending||0," pending payment(s)"))):g(JSON.stringify(e)),[3,6];case 4:return t=n.sent(),g("Error loading pending payments: "+String(t)),[3,6];case 5:return V(!1),[7];case 6:return[2]}}))}))).apply(this,arguments)}function ce(){return(ce=(0,r.Z)((function(e,t,n){var r,i;return(0,o.__generator)(this,(function(s){switch(s.label){case 0:if(!confirm("Approve payment from ".concat(t," for \u20b9").concat(n,"? This will add credits to their account.")))return[2];V(!0),g(""),s.label=1;case 1:return s.trys.push([1,4,5,6]),[4,fetch("/api/admin/approve-payment",{method:"POST",headers:q(),body:JSON.stringify({paymentId:e})})];case 2:return[4,s.sent().json()];case 3:return(r=s.sent()).success?(g("\u2705 Payment approved! Added ".concat(r.creditsAdded," credits to ").concat(r.email,". Total: ").concat(r.totalCredits)),ae(),se()):g(JSON.stringify(r)),[3,6];case 4:return i=s.sent(),g("Error approving payment: "+String(i)),[3,6];case 5:return V(!1),[7];case 6:return[2]}}))}))).apply(this,arguments)}return(0,d.jsxs)("div",{style:{padding:24,maxWidth:1400,margin:"0 auto"},children:[(0,d.jsx)("h1",{children:"\ud83d\udee0\ufe0f Backend Admin Panel"}),(0,d.jsxs)("div",{style:{marginBottom:24,padding:16,background:"#f8f9fa",borderRadius:8,border:"1px solid #dee2e6"},children:[(0,d.jsx)("label",{style:{fontWeight:"bold",marginBottom:8,display:"block"},children:"\ud83d\udd11 Admin JWT Token:"}),(0,d.jsx)("input",{style:{width:"100%",padding:"8px 12px",fontSize:"14px",border:"1px solid #ced4da",borderRadius:4},value:t,onChange:function(e){return n(e.target.value)},placeholder:"Paste your admin JWT token here to unlock features"}),!t&&(0,d.jsx)("p",{style:{color:"#6c757d",fontSize:"13px",margin:"8px 0 0 0"},children:"\ud83d\udca1 Tip: Get your token from the admin login endpoint"}),t&&(0,d.jsx)("p",{style:{color:"#28a745",fontSize:"13px",margin:"8px 0 0 0"},children:"\u2705 Token set - features unlocked!"})]}),(0,d.jsxs)("div",{style:{margin:"12px 0"},children:[(0,d.jsx)("button",{onClick:function(){return Q.apply(this,arguments)},disabled:R,children:"Load Migration SQL"}),(0,d.jsx)("button",{onClick:function(){navigator.clipboard&&navigator.clipboard.writeText(c)},disabled:!c,children:"Copy SQL"}),(0,d.jsx)("button",{onClick:function(){return X.apply(this,arguments)},disabled:R,children:"Run Migration (server-side)"}),(0,d.jsx)("button",{onClick:function(){return Y.apply(this,arguments)},disabled:R,children:"Reload Processed Transactions"}),(0,d.jsx)("button",{onClick:function(){return K.apply(this,arguments)},disabled:R,children:"List Processed Transactions"})]}),(0,d.jsxs)("div",{style:{margin:"24px 0",padding:"12px",background:"#fff3cd",border:"2px solid #ff6b6b"},children:[(0,d.jsx)("h3",{style:{color:"#d63031",marginTop:0},children:"\u26a0\ufe0f Danger Zone - Reset Data"}),(0,d.jsxs)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[(0,d.jsx)("button",{onClick:function(){return ee.apply(this,arguments)},disabled:R,style:{background:"#ff6b6b",color:"white",border:"none",padding:"8px 12px",cursor:"pointer"},children:"Reset All Signups"}),(0,d.jsx)("button",{onClick:function(){return te.apply(this,arguments)},disabled:R,style:{background:"#ff6b6b",color:"white",border:"none",padding:"8px 12px",cursor:"pointer"},children:"Reset All Logins"}),(0,d.jsx)("button",{onClick:function(){return ne.apply(this,arguments)},disabled:R,style:{background:"#ff6b6b",color:"white",border:"none",padding:"8px 12px",cursor:"pointer"},children:"Reset All Transactions"}),(0,d.jsx)("button",{onClick:function(){return re.apply(this,arguments)},disabled:R,style:{background:"#d63031",color:"white",border:"none",padding:"8px 12px",cursor:"pointer",fontWeight:"bold"},children:"\ud83d\udea8 RESET EVERYTHING"})]}),(0,d.jsx)("p",{style:{fontSize:"12px",color:"#856404",margin:"8px 0 0 0"},children:"These actions are IRREVERSIBLE and will delete data from both memory and database."})]}),(0,d.jsxs)("div",{style:{margin:"12px 0"},children:[(0,d.jsx)("h3",{children:"Migration SQL"}),(0,d.jsx)("textarea",{style:{width:"100%",height:160},value:c,readOnly:!0})]}),(0,d.jsxs)("div",{style:{margin:"12px 0"},children:[(0,d.jsx)("h3",{children:"Add Processed Transaction"}),(0,d.jsxs)("form",{onSubmit:function(e){return $.apply(this,arguments)},children:[(0,d.jsx)("div",{children:(0,d.jsx)("input",{placeholder:"transactionId",value:W.transactionId,onChange:function(e){return N((0,s.Z)((0,i.Z)({},W),{transactionId:e.target.value}))}})}),(0,d.jsx)("div",{children:(0,d.jsx)("input",{placeholder:"email",value:W.email,onChange:function(e){return N((0,s.Z)((0,i.Z)({},W),{email:e.target.value}))}})}),(0,d.jsx)("div",{children:(0,d.jsx)("input",{placeholder:"amount",value:W.amount,onChange:function(e){return N((0,s.Z)((0,i.Z)({},W),{amount:e.target.value}))}})}),(0,d.jsx)("div",{children:(0,d.jsx)("input",{placeholder:"planType (optional)",value:W.planType,onChange:function(e){return N((0,s.Z)((0,i.Z)({},W),{planType:e.target.value}))}})}),(0,d.jsx)("div",{style:{marginTop:8},children:(0,d.jsx)("button",{type:"submit",disabled:R,children:"Add"})})]})]}),(0,d.jsxs)("div",{style:{margin:"12px 0"},children:[(0,d.jsx)("h3",{children:"Processed Transactions (recent)"}),(0,d.jsx)("div",{style:{maxHeight:240,overflow:"auto",border:"1px solid #ddd",padding:8},children:0===f.length?(0,d.jsx)("div",{children:"No transactions loaded"}):(0,d.jsx)("ul",{children:f.map((function(e){return(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:e.transaction_id})," \u2014 ",e.email," \u2014 ",e.amount," \u2014 ",e.plan_type," \u2014 ",e.created_at]},e.transaction_id||e.id)}))})})]}),(0,d.jsxs)("div",{id:"credit-update-section",style:{margin:"24px 0",padding:20,background:"#f0f8ff",borderRadius:8,border:"2px solid #3b82f6"},children:[(0,d.jsxs)("h3",{style:{margin:"0 0 16px 0",color:"#1e40af",display:"flex",alignItems:"center",gap:8},children:["\ud83d\udcb3 Manual Credit Update",z&&(0,d.jsxs)("span",{style:{fontSize:"14px",color:"#059669",fontWeight:"normal"},children:["(Editing: ",z,")"]})]}),(0,d.jsxs)("form",{onSubmit:function(e){return de.apply(this,arguments)},children:[(0,d.jsxs)("div",{style:{marginBottom:12},children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"#374151"},children:"Email:"}),(0,d.jsx)("input",{type:"email",placeholder:"user@example.com",value:J.email,onChange:function(e){return U((0,s.Z)((0,i.Z)({},J),{email:e.target.value}))},required:!0,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:4}})]}),(0,d.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:12},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"#374151"},children:"Credits:"}),(0,d.jsx)("input",{type:"number",placeholder:"100",value:J.credits,onChange:function(e){return U((0,s.Z)((0,i.Z)({},J),{credits:e.target.value}))},style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:4}})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"#374151"},children:"Paid Amount (\u20b9):"}),(0,d.jsx)("input",{type:"number",placeholder:"100",value:J.paidAmount,onChange:function(e){return U((0,s.Z)((0,i.Z)({},J),{paidAmount:e.target.value}))},style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:4}})]})]}),(0,d.jsxs)("div",{style:{marginBottom:12},children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"#374151"},children:"Action:"}),(0,d.jsxs)("select",{value:J.action,onChange:function(e){return U((0,s.Z)((0,i.Z)({},J),{action:e.target.value}))},style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:4},children:[(0,d.jsx)("option",{value:"set",children:"Set (Replace current value)"}),(0,d.jsx)("option",{value:"add",children:"Add (Increase by amount)"}),(0,d.jsx)("option",{value:"subtract",children:"Subtract (Decrease by amount)"})]})]}),(0,d.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,d.jsx)("button",{type:"submit",disabled:R,style:{background:"#3b82f6",color:"white",border:"none",padding:"10px 20px",borderRadius:6,cursor:"pointer",fontWeight:"bold",flex:1},children:R?"Updating...":"\u2705 Update Credits"}),z&&(0,d.jsx)("button",{type:"button",onClick:function(){L(null),U({email:"",credits:"",paidAmount:"",action:"add"})},style:{background:"#6b7280",color:"white",border:"none",padding:"10px 20px",borderRadius:6,cursor:"pointer"},children:"Cancel"})]})]}),(0,d.jsxs)("p",{style:{fontSize:"12px",color:"#4b5563",margin:"12px 0 0 0",lineHeight:"1.5"},children:[(0,d.jsx)("strong",{children:"How to use:"}),(0,d.jsx)("br",{}),"\u2022 ",(0,d.jsx)("strong",{children:"Set:"})," Replace the current value with the entered amount",(0,d.jsx)("br",{}),"\u2022 ",(0,d.jsx)("strong",{children:"Add:"})," Add the entered amount to current balance",(0,d.jsx)("br",{}),"\u2022 ",(0,d.jsx)("strong",{children:"Subtract:"})," Remove the entered amount from current balance"]})]}),(0,d.jsxs)("div",{style:{margin:"24px 0",padding:20,background:"#fff9db",borderRadius:8,border:"2px solid #fbbf24"},children:[(0,d.jsxs)("h3",{style:{margin:"0 0 16px 0",color:"#92400e",display:"flex",alignItems:"center",gap:8,justifyContent:"space-between"},children:[(0,d.jsx)("span",{children:"\u23f3 Pending Payment Approvals"}),(0,d.jsx)("button",{onClick:ae,disabled:F,style:{background:"#fbbf24",color:"#78350f",border:"none",padding:"8px 16px",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:F?"\u23f3 Loading...":"\ud83d\udd04 Load Pending"})]}),(0,d.jsxs)("div",{style:{background:"white",borderRadius:6,border:"1px solid #fbbf24",padding:12},children:[(0,d.jsx)("p",{style:{fontSize:"13px",color:"#78350f",marginBottom:12},children:"\u2139\ufe0f These payments have been submitted by users and are awaiting manual verification before credits are added."}),0===H.length?(0,d.jsx)("div",{style:{padding:20,textAlign:"center",color:"#6b7280"},children:F?"Loading...":'No pending payments. Click "Load Pending" to check.'}):(0,d.jsx)("div",{style:{maxHeight:400,overflow:"auto"},children:(0,d.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"14px"},children:[(0,d.jsx)("thead",{style:{background:"#fef3c7",position:"sticky",top:0},children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{style:{padding:10,textAlign:"left",borderBottom:"2px solid #fbbf24"},children:"Email"}),(0,d.jsx)("th",{style:{padding:10,textAlign:"center",borderBottom:"2px solid #fbbf24"},children:"Amount"}),(0,d.jsx)("th",{style:{padding:10,textAlign:"left",borderBottom:"2px solid #fbbf24"},children:"Transaction ID"}),(0,d.jsx)("th",{style:{padding:10,textAlign:"center",borderBottom:"2px solid #fbbf24"},children:"Plan"}),(0,d.jsx)("th",{style:{padding:10,textAlign:"center",borderBottom:"2px solid #fbbf24"},children:"Submitted"}),(0,d.jsx)("th",{style:{padding:10,textAlign:"center",borderBottom:"2px solid #fbbf24"},children:"Status"}),(0,d.jsx)("th",{style:{padding:10,textAlign:"center",borderBottom:"2px solid #fbbf24"},children:"Action"})]})}),(0,d.jsx)("tbody",{children:H.map((function(e,t){return(0,d.jsxs)("tr",{style:{background:t%2===0?"white":"#fefce8"},children:[(0,d.jsx)("td",{style:{padding:10,borderBottom:"1px solid #fde68a"},children:(0,d.jsx)("strong",{children:e.email})}),(0,d.jsxs)("td",{style:{padding:10,borderBottom:"1px solid #fde68a",textAlign:"center",fontWeight:"bold",color:"#059669"},children:["\u20b9",e.amount]}),(0,d.jsx)("td",{style:{padding:10,borderBottom:"1px solid #fde68a",fontFamily:"monospace",fontSize:"13px"},children:e.transaction_id}),(0,d.jsx)("td",{style:{padding:10,borderBottom:"1px solid #fde68a",textAlign:"center"},children:(0,d.jsx)("span",{style:{background:"premium"===e.plan_type?"#8b5cf6":"#3b82f6",color:"white",padding:"4px 8px",borderRadius:4,fontSize:"11px",fontWeight:"bold"},children:e.plan_type||"basic"})}),(0,d.jsx)("td",{style:{padding:10,borderBottom:"1px solid #fde68a",textAlign:"center",fontSize:"12px",color:"#6b7280"},children:new Date(e.submitted_at).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),(0,d.jsx)("td",{style:{padding:10,borderBottom:"1px solid #fde68a",textAlign:"center"},children:(0,d.jsx)("span",{style:{background:"pending"===e.status?"#fbbf24":"approved"===e.status?"#10b981":"#ef4444",color:"pending"===e.status?"#78350f":"white",padding:"4px 10px",borderRadius:4,fontSize:"11px",fontWeight:"bold"},children:e.status.toUpperCase()})}),(0,d.jsxs)("td",{style:{padding:10,borderBottom:"1px solid #fde68a",textAlign:"center"},children:["pending"===e.status&&(0,d.jsx)("button",{onClick:function(){return function(e,t,n){return ce.apply(this,arguments)}(e.id,e.email,e.amount)},disabled:F,style:{background:"#10b981",color:"white",border:"none",padding:"6px 12px",borderRadius:4,cursor:"pointer",fontSize:"12px",fontWeight:"bold"},children:"\u2705 Approve"}),"approved"===e.status&&(0,d.jsx)("span",{style:{fontSize:"12px",color:"#6b7280"},children:"Already approved"})]})]},e.id)}))})]})})]})]}),(0,d.jsxs)("div",{style:{margin:"24px 0",padding:20,background:"white",borderRadius:8,border:"1px solid #dee2e6",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,d.jsx)("h2",{style:{margin:0,display:"flex",alignItems:"center",gap:8},children:"\ud83d\udc65 All Users & Credits"}),(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,d.jsxs)("span",{style:{padding:"6px 12px",background:"#e3f2fd",color:"#1976d2",borderRadius:20,fontSize:"14px",fontWeight:"bold"},children:["Total: ",S.length," users"]}),(0,d.jsx)("button",{onClick:se,disabled:C||!t,style:{padding:"8px 16px",background:C?"#95a5a6":"#007bff",color:"white",border:"none",borderRadius:4,cursor:C||!t?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:C?"\u23f3 Loading...":"\ud83d\udd04 Refresh Users"})]})]}),t?C?(0,d.jsx)("div",{style:{padding:40,textAlign:"center"},children:(0,d.jsx)("p",{style:{fontSize:16,color:"#666",margin:0},children:"\u23f3 Loading users..."})}):0===S.length?(0,d.jsx)("div",{style:{padding:40,textAlign:"center",background:"#f8f9fa",borderRadius:8},children:(0,d.jsx)("p",{style:{fontSize:16,color:"#666",margin:0},children:"\ud83d\udced No users found. Users will appear here after they sign up."})}):(0,d.jsx)("div",{style:{maxHeight:500,overflow:"auto",border:"1px solid #dee2e6",borderRadius:4},children:(0,d.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"14px"},children:[(0,d.jsx)("thead",{style:{position:"sticky",top:0,background:"#f8f9fa",zIndex:10},children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{style:{padding:"12px",borderBottom:"2px solid #dee2e6",textAlign:"left",fontWeight:"bold"},children:"\ud83d\udce7 Email"}),(0,d.jsx)("th",{style:{padding:"12px",borderBottom:"2px solid #dee2e6",textAlign:"center",fontWeight:"bold"},children:"\ud83d\udcb0 Credits"}),(0,d.jsx)("th",{style:{padding:"12px",borderBottom:"2px solid #dee2e6",textAlign:"center",fontWeight:"bold"},children:"\ud83d\udcb3 Paid"}),(0,d.jsx)("th",{style:{padding:"12px",borderBottom:"2px solid #dee2e6",textAlign:"center",fontWeight:"bold"},children:"Status"}),(0,d.jsx)("th",{style:{padding:"12px",borderBottom:"2px solid #dee2e6",textAlign:"center",fontWeight:"bold"},children:"\ud83d\udd12 Trial Used"}),(0,d.jsx)("th",{style:{padding:"12px",borderBottom:"2px solid #dee2e6",textAlign:"left",fontWeight:"bold"},children:"\ud83c\udf10 IP Address"}),(0,d.jsx)("th",{style:{padding:"12px",borderBottom:"2px solid #dee2e6",textAlign:"left",fontWeight:"bold"},children:"\ud83d\udcc5 Registered"}),(0,d.jsx)("th",{style:{padding:"12px",borderBottom:"2px solid #dee2e6",textAlign:"center",fontWeight:"bold"},children:"\u2699\ufe0f Actions"})]})}),(0,d.jsx)("tbody",{children:S.map((function(e,t){return(0,d.jsxs)("tr",{style:{background:t%2===0?"white":"#f8f9fa",transition:"background 0.2s"},onMouseOver:function(e){return e.currentTarget.style.background="#e3f2fd"},onMouseOut:function(e){return e.currentTarget.style.background=t%2===0?"white":"#f8f9fa"},children:[(0,d.jsx)("td",{style:{padding:"12px",borderBottom:"1px solid #dee2e6"},children:(0,d.jsx)("strong",{style:{color:"#212529"},children:e.email})}),(0,d.jsx)("td",{style:{padding:"12px",borderBottom:"1px solid #dee2e6",textAlign:"center"},children:(0,d.jsx)("span",{style:{color:e.credits>50?"#28a745":e.credits>0?"#ffc107":"#dc3545",fontWeight:"bold",fontSize:"16px"},children:e.credits||0})}),(0,d.jsxs)("td",{style:{padding:"12px",borderBottom:"1px solid #dee2e6",textAlign:"center",fontWeight:"bold"},children:["\u20b9",(e.paidAmount||0).toFixed(2)]}),(0,d.jsx)("td",{style:{padding:"12px",borderBottom:"1px solid #dee2e6",textAlign:"center"},children:e.isSubscribed?(0,d.jsx)("span",{style:{background:"#28a745",color:"white",padding:"4px 12px",borderRadius:20,fontSize:"12px",fontWeight:"bold"},children:"\u2713 PAID"}):(0,d.jsx)("span",{style:{background:"#6c757d",color:"white",padding:"4px 12px",borderRadius:20,fontSize:"12px",fontWeight:"bold"},children:"\u25cb TRIAL"})}),(0,d.jsx)("td",{style:{padding:"12px",borderBottom:"1px solid #dee2e6",textAlign:"center"},children:e.trialUsed?(0,d.jsx)("span",{style:{background:"#dc3545",color:"white",padding:"4px 12px",borderRadius:20,fontSize:"12px",fontWeight:"bold"},children:"\u2717 USED"}):(0,d.jsx)("span",{style:{background:"#17a2b8",color:"white",padding:"4px 12px",borderRadius:20,fontSize:"12px",fontWeight:"bold"},children:"\u2713 ACTIVE"})}),(0,d.jsx)("td",{style:{padding:"12px",borderBottom:"1px solid #dee2e6",fontSize:"13px",color:"#6c757d",fontFamily:"monospace"},children:e.ipAddress||e.ip_address||"N/A"}),(0,d.jsx)("td",{style:{padding:"12px",borderBottom:"1px solid #dee2e6",fontSize:"13px",color:"#6c757d"},children:new Date(e.registeredAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}),(0,d.jsx)("td",{style:{padding:"12px",borderBottom:"1px solid #dee2e6",textAlign:"center"},children:(0,d.jsx)("button",{onClick:function(){return function(e){var t;L(e.email),U({email:e.email,credits:e.credits.toString(),paidAmount:e.paidAmount.toString(),action:"set"}),null===(t=document.getElementById("credit-update-section"))||void 0===t||t.scrollIntoView({behavior:"smooth"})}(e)},style:{background:"#3b82f6",color:"white",border:"none",padding:"6px 12px",borderRadius:4,cursor:"pointer",fontSize:"12px",fontWeight:"bold"},children:"\u270f\ufe0f Edit Credits"})})]},t)}))})]})}):(0,d.jsx)("div",{style:{padding:40,textAlign:"center",background:"#fff3cd",borderRadius:8,border:"1px solid #ffc107"},children:(0,d.jsx)("p",{style:{fontSize:16,color:"#856404",margin:0},children:"\ud83d\udd12 Please paste your admin JWT token above to view users"})})]}),(0,d.jsxs)("div",{style:{margin:"12px 0"},children:[(0,d.jsx)("h3",{children:"User Logins"}),(0,d.jsxs)("div",{style:{marginBottom:8},children:[(0,d.jsx)("input",{placeholder:"Filter by email (optional)",value:k,onChange:function(e){return _(e.target.value)},style:{marginRight:8,padding:"4px 8px"}}),(0,d.jsx)("button",{onClick:function(){return ie.apply(this,arguments)},disabled:R,children:"Load Logins"})]}),(0,d.jsx)("div",{style:{maxHeight:300,overflow:"auto",border:"1px solid #ddd",padding:8},children:0===m.length?(0,d.jsx)("div",{children:"No logins loaded"}):(0,d.jsx)("ul",{style:{fontSize:"13px"},children:m.map((function(e,t){return(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:e.email})," \u2014 ",e.login_time||new Date(e.timestamp).toISOString()," \u2014 IP: ",e.ip_address||e.ip," \u2014 ",(e.user_agent||e.userAgent||"").substring(0,50),"..."]},e.id||t)}))})})]}),(0,d.jsxs)("div",{style:{marginTop:12},children:[(0,d.jsx)("h3",{children:"Output / Result"}),(0,d.jsx)("pre",{style:{whiteSpace:"pre-wrap",background:"#f7f7f7",padding:12},children:h})]})]})}},7568:function(e,t,n){"use strict";function r(e,t,n,r,i,s,o){try{var d=e[s](o),a=d.value}catch(l){return void n(l)}d.done?t(a):Promise.resolve(a).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,s){var o=e.apply(t,n);function d(e){r(o,i,s,d,a,"next",e)}function a(e){r(o,i,s,d,a,"throw",e)}d(void 0)}))}}n.d(t,{Z:function(){return i}})},9396:function(e,t,n){"use strict";function r(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}n.d(t,{Z:function(){return r}})}},function(e){e.O(0,[774,888,179],(function(){return t=5426,e(e.s=t);var t}));var t=e.O();_N_E=t}]);