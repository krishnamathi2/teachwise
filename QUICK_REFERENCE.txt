â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  TRIAL RESTRICTIONS - QUICK REFERENCE                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“‹ WHAT'S NEW
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ“ One trial per email address (permanent restriction)
âœ“ One trial per IP address (device/network restriction)  
âœ“ 20-minute time limit enforced automatically
âœ“ Trial marked as "used" when credits or time run out

ğŸ—„ï¸ DATABASE MIGRATION (REQUIRED)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Run in Supabase SQL Editor (https://jaelyccdavvorfxpucdb.supabase.co):

-- For existing installations:
ALTER TABLE user_trials ADD COLUMN IF NOT EXISTS ip_address VARCHAR(100);
ALTER TABLE user_trials ADD COLUMN IF NOT EXISTS trial_used BOOLEAN DEFAULT false;
CREATE INDEX IF NOT EXISTS idx_user_trials_ip ON user_trials(ip_address);

-- OR use the complete script from:
backend/migrations/add_ip_to_user_trials.sql

ğŸš€ DEPLOYMENT CHECKLIST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â–¡ 1. Run database migration in Supabase
â–¡ 2. Restart backend: cd backend && node index.js
â–¡ 3. Test new user signup
â–¡ 4. Verify trial expiration (20 min)
â–¡ 5. Test same email rejection
â–¡ 6. Test same IP rejection
â–¡ 7. Check admin panel displays IP & trial status

ğŸ§ª TESTING COMMANDS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Test 1: New user (should work)
curl "http://localhost:3003/trial-status?email=newuser@test.com"
# Expected: credits: 100, trialExpired: false

# Test 2: Check admin users
curl -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  "http://localhost:3003/admin/users"

# Test 3: Same email retry (should fail after trial used)
curl "http://localhost:3003/trial-status?email=newuser@test.com"
# Expected: credits: 0, trialExpired: true (after 20 min or credits exhausted)

âš™ï¸ CONFIGURATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
File: backend/index.js

CREDITS_CONFIG = {
  FREE_TRIAL_CREDITS: 100,      // Credits on signup
  CREDITS_PER_GENERATE: 10,     // Credits per generation  
  TRIAL_PERIOD_MINUTES: 20,     // Time limit (minutes)
  PRICE_PER_CREDIT: 1           // â‚¹1 per credit
}

ğŸ“Š ADMIN PANEL CHANGES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
New columns visible in User Management table:
- ğŸ”’ Trial Used: âœ— USED (red) or âœ“ ACTIVE (cyan)
- ğŸŒ IP Address: User's IP in monospace font

ğŸ” KEY FUNCTIONS MODIFIED
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ“ checkIPTrialUsed(ip) - NEW: Check if IP used trial
âœ“ getUserFromDB(email) - Returns ipAddress & trialUsed
âœ“ saveUserToDB(email, userData) - Saves IP & trial status
âœ“ /trial-status endpoint - Validates email & IP
âœ“ deductCredit(email) - Marks trial as used
âœ“ /admin/users endpoint - Returns new fields

ğŸ“ TRIAL EXPIRATION LOGIC
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Trial expires when ANY condition is true:

1. Credits < 10 (insufficient for 1 generation)
2. Time elapsed > 20 minutes  
3. trial_used flag = true

When expired â†’ trial_used set to true in database

ğŸ›¡ï¸ RESTRICTIONS ENFORCED
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ— Same email, second trial â†’ REJECTED
âœ— Different email, same IP â†’ REJECTED
âœ— Trial expired (time/credits) â†’ REJECTED
âœ“ Paid user (paidAmount > 0) â†’ ALLOWED (bypasses restrictions)

ğŸ’¡ TROUBLESHOOTING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Issue: "IP already used trial" for valid users
â†’ Users behind same network/VPN share IP (by design)
â†’ Solution: Subscribe to bypass trial restrictions

Issue: Trial not expiring after 20 minutes
â†’ Check server system time (date command)
â†’ Ensure backend server is running

Issue: Existing users can't access
â†’ Run: UPDATE user_trials SET trial_used=false WHERE email='user@email.com'

ğŸ“š DOCUMENTATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Full details in:
- TRIAL_RESTRICTIONS.md (migration guide)
- IMPLEMENTATION_SUMMARY.md (technical details)
- backend/migrations/ (SQL scripts)

ğŸ¯ SUCCESS CRITERIA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ“ New users get 100 credits for 20 minutes
âœ“ Same email can't create second trial
âœ“ Same IP can't create multiple trials
âœ“ Trial marked as "used" when expired
âœ“ Admin panel shows IP and trial status
âœ“ Paid users bypass all restrictions

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Need help? Check the detailed guides:
- TRIAL_RESTRICTIONS.md - Step-by-step migration
- IMPLEMENTATION_SUMMARY.md - Complete technical overview
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
